{"ast":null,"code":"import \"vant/es/dialog/style\";\nimport _Dialog from \"vant/es/dialog\";\nimport \"vant/es/popup/style\";\nimport _Popup from \"vant/es/popup\";\nimport { mapGetters } from 'vuex';\nimport { gerenxinxi_post, apilogoff, huoquyue_post } from '@/API/user';\nimport EnterPassword from \"@/components/EnterPassword/index.vue\";\nexport default {\n  components: {\n    EnterPassword,\n    [_Popup.name]: _Popup,\n    [_Dialog.name]: _Dialog\n  },\n  data() {\n    return {\n      itemName: process.env.VUE_APP_ITEM_NAME,\n      formLabelAlign: {\n        account: '',\n        reason: '',\n        cashPassword: ''\n      },\n      pwtStatus: false\n    };\n  },\n  async created() {\n    const {\n      username\n    } = await gerenxinxi_post({});\n    this.formLabelAlign.account = username;\n  },\n  computed: {\n    ...mapGetters({\n      userInfo: 'userInfo'\n    })\n  },\n  methods: {\n    onClickLeft() {\n      this.$router.go(-1);\n    },\n    onLogout() {\n      if (this.formLabelAlign.account.trim() == '') {\n        this.$notify(this.$t('请输入您的账号'), 'warning');\n        return;\n      }\n      if (this.formLabelAlign.reason.trim() == '') {\n        this.$notify(this.$t('请输入您的离开原因'), 'warning');\n        return;\n      }\n      let message = this.$t('警告！请谨慎操作注销账户，如果您不再使用该账号，可点击【同意注销】，注销后可能几天内无法注册。');\n      if (process.env.VUE_APP_PUT_ON_SHELVES) {\n        message = this.$t('警告！请谨慎操作注销账户，如果您不再使用该账号，可点击【同意注销】，注销后72小时内无法注册。');\n      }\n      _Dialog.alert({\n        title: this.$t('您确认要注销账号吗？'),\n        message,\n        messageAlign: 'left',\n        showCancelButton: true,\n        confirmButtonText: this.$t('同意注销'),\n        confirmButtonColor: '#FF0000',\n        cancelButtonText: this.$t('取消'),\n        cancelButtonColor: '#999999'\n      }).then(async () => {\n        this.$toast.loading();\n        const {\n          money\n        } = await huoquyue_post();\n        if (money !== 0) {\n          this.$notify(this.$t('该账号存在可用余额, 不可注销!'), 'warning');\n          this.$toast.clear();\n          return;\n        }\n        if (this.userInfo.safeword == 0) {\n          this.getPassword(null);\n        } else {\n          this.pwtStatus = true;\n        }\n      });\n    },\n    async getPassword(value) {\n      this.formLabelAlign.cashPassword = value;\n      this.$toast.loading();\n      if (value == '') {\n        this.$notify(this.$t('请输入密码'), 'warning');\n        this.$toast.clear();\n        return;\n      }\n      try {\n        const res = await apilogoff(this.formLabelAlign);\n        this.$toast.clear();\n        this.$notify(this.$t('注销成功'), 'success');\n        this.$router.replace('/login');\n      } catch (error) {\n        console.log(`error ::->`, error);\n      }\n\n      // if (value == '123456') {\n      //     this.$toast(this.$t('注销成功'))\n      //     this.$router.push('/login')\n      // } else {\n      //     this.$toast(this.$t('密码错误'))\n      // }\n    }\n  }\n};","map":{"version":3,"names":["mapGetters","gerenxinxi_post","apilogoff","huoquyue_post","EnterPassword","components","_Popup","name","_Dialog","data","itemName","process","env","VUE_APP_ITEM_NAME","formLabelAlign","account","reason","cashPassword","pwtStatus","created","username","computed","userInfo","methods","onClickLeft","$router","go","onLogout","trim","$notify","$t","message","VUE_APP_PUT_ON_SHELVES","alert","title","messageAlign","showCancelButton","confirmButtonText","confirmButtonColor","cancelButtonText","cancelButtonColor","then","$toast","loading","money","clear","safeword","getPassword","value","res","replace","error","console","log"],"sources":["src/page/accountCancellation/index.vue"],"sourcesContent":["<template>\r\n    <div class=\"account_cancellation\">\r\n        <van-nav-bar safe-area-inset-top fixed :title=\"$t('账号注销')\" left-arrow @click-left=\"onClickLeft\" />\r\n        <div style=\"width: 100%;\" class=\"h46\"></div>\r\n        <el-form label-position=\"top\" label-width=\"80px\" :model=\"formLabelAlign\" class=\"acc_form\">\r\n            <el-form-item :label=\"$t('您的账号')\">\r\n                <el-input maxlength=\"50\" disabled v-model.trim=\"formLabelAlign.account\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item :label=\"$t('为什么要离开?')\">\r\n                <el-input type=\"textarea\" maxlength=\"1000\" :autosize=\"{ minRows: 6, maxRows: 8 }\"\r\n                    v-model.trim=\"formLabelAlign.reason\"></el-input>\r\n            </el-form-item>\r\n        </el-form>\r\n        <div class=\"logout\" @click=\"onLogout\">{{ $t('注销账号') }}</div>\r\n        <!-- 密码弹窗 -->\r\n        <van-popup v-model=\"pwtStatus\" position=\"bottom\">\r\n            <enter-Password :isPasswordShow=\"pwtStatus\" @close=\"pwtStatus = false\"\r\n                @getPassword=\"getPassword\"></enter-Password>\r\n        </van-popup>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { Popup, Dialog } from \"vant\";\r\nimport { mapGetters } from 'vuex'\r\nimport { gerenxinxi_post, apilogoff, huoquyue_post } from '@/API/user';\r\nimport EnterPassword from \"@/components/EnterPassword/index.vue\";\r\nexport default {\r\n    components: {\r\n        EnterPassword,\r\n        [Popup.name]: Popup,\r\n        [Dialog.name]: Dialog,\r\n    },\r\n    data() {\r\n        return {\r\n            itemName: process.env.VUE_APP_ITEM_NAME,\r\n            formLabelAlign: {\r\n                account: '',\r\n                reason: '',\r\n                cashPassword: '',\r\n            },\r\n            pwtStatus: false,\r\n        }\r\n    },\r\n    async created() {\r\n        const { username } = await gerenxinxi_post({})\r\n        this.formLabelAlign.account = username\r\n    },\r\n    computed: {\r\n        ...mapGetters({\r\n            userInfo: 'userInfo'\r\n        })\r\n    },\r\n    methods: {\r\n        onClickLeft() {\r\n            this.$router.go(-1)\r\n        },\r\n        onLogout() {\r\n            if (this.formLabelAlign.account.trim() == '') {\r\n                this.$notify(this.$t('请输入您的账号'), 'warning')\r\n                return\r\n            }\r\n            if (this.formLabelAlign.reason.trim() == '') {\r\n                this.$notify(this.$t('请输入您的离开原因'), 'warning')\r\n                return\r\n            }\r\n            let message = this.$t('警告！请谨慎操作注销账户，如果您不再使用该账号，可点击【同意注销】，注销后可能几天内无法注册。')\r\n            if (process.env.VUE_APP_PUT_ON_SHELVES) {\r\n                message = this.$t('警告！请谨慎操作注销账户，如果您不再使用该账号，可点击【同意注销】，注销后72小时内无法注册。')\r\n            }\r\n            Dialog.alert({\r\n                title: this.$t('您确认要注销账号吗？'),\r\n                message,\r\n                messageAlign: 'left',\r\n                showCancelButton: true,\r\n                confirmButtonText: this.$t('同意注销'),\r\n                confirmButtonColor: '#FF0000',\r\n                cancelButtonText: this.$t('取消'),\r\n                cancelButtonColor: '#999999',\r\n            }).then(async () => {\r\n                this.$toast.loading()\r\n                const { money } = await huoquyue_post()\r\n                if (money !== 0) {\r\n                    this.$notify(this.$t('该账号存在可用余额, 不可注销!'), 'warning')\r\n                    this.$toast.clear()\r\n                    return\r\n                }\r\n                if (this.userInfo.safeword == 0) {\r\n                    this.getPassword(null)\r\n                } else {\r\n                    this.pwtStatus = true;\r\n                }\r\n            });\r\n        },\r\n        async getPassword(value) {\r\n            this.formLabelAlign.cashPassword = value;\r\n            this.$toast.loading()\r\n            if (value == '') {\r\n                this.$notify(this.$t('请输入密码'), 'warning')\r\n                this.$toast.clear()\r\n                return\r\n            }\r\n\r\n            try {\r\n                const res = await apilogoff(this.formLabelAlign)\r\n                this.$toast.clear()\r\n                this.$notify(this.$t('注销成功'), 'success')\r\n                this.$router.replace('/login')\r\n            } catch (error) {\r\n                console.log(`error ::->`, error);\r\n            }\r\n\r\n            // if (value == '123456') {\r\n            //     this.$toast(this.$t('注销成功'))\r\n            //     this.$router.push('/login')\r\n            // } else {\r\n            //     this.$toast(this.$t('密码错误'))\r\n            // }\r\n\r\n        },\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.acc_form {\r\n    padding: 0 15px;\r\n\r\n    :deep(.el-form-item__label) {\r\n        padding: 0 !important;\r\n        font-weight: 600;\r\n        font-size: 16px;\r\n        color: #333;\r\n    }\r\n}\r\n\r\n:deep(input) {\r\n    padding-right: 60px;\r\n}\r\n\r\n.logout {\r\n    margin: 15px 15px;\r\n    margin-top: 56px;\r\n    background: var(--main-color);\r\n    border-radius: 4px;\r\n    height: 44px;\r\n    font-style: normal;\r\n    font-weight: 400;\r\n    font-size: 16px;\r\n    line-height: 44px;\r\n    text-align: center;\r\n    color: #FFFFFF;\r\n}\r\n</style>\r\n<style lang=\"scss\">\r\n.van-dialog__message {\r\n    padding-top: 20px;\r\n    line-height: 25px;\r\n    border: none;\r\n}\r\n\r\n.van-dialog__footer {\r\n    padding: 0 15px 30px 15px;\r\n\r\n    &::after {\r\n        display: none;\r\n    }\r\n\r\n    button {\r\n        border: none;\r\n        border-radius: 8px;\r\n\r\n        &:nth-child(1) {\r\n            border: 1px solid #999999;\r\n            margin-right: 10px;\r\n        }\r\n\r\n        &:nth-child(2) {\r\n            background: #DA3231;\r\n            color: #FFFFFF !important;\r\n        }\r\n\r\n        &::before {\r\n            display: none;\r\n        }\r\n\r\n        &::after {\r\n            display: none;\r\n        }\r\n    }\r\n}\r\n</style>"],"mappings":";;;;AAwBA,SAAAA,UAAA;AACA,SAAAC,eAAA,EAAAC,SAAA,EAAAC,aAAA;AACA,OAAAC,aAAA;AACA;EACAC,UAAA;IACAD,aAAA;IACA,CAAAE,MAAA,CAAAC,IAAA,GAAAD,MAAA;IACA,CAAAE,OAAA,CAAAD,IAAA,GAAAC;EACA;EACAC,KAAA;IACA;MACAC,QAAA,EAAAC,OAAA,CAAAC,GAAA,CAAAC,iBAAA;MACAC,cAAA;QACAC,OAAA;QACAC,MAAA;QACAC,YAAA;MACA;MACAC,SAAA;IACA;EACA;EACA,MAAAC,QAAA;IACA;MAAAC;IAAA,UAAAnB,eAAA;IACA,KAAAa,cAAA,CAAAC,OAAA,GAAAK,QAAA;EACA;EACAC,QAAA;IACA,GAAArB,UAAA;MACAsB,QAAA;IACA;EACA;EACAC,OAAA;IACAC,YAAA;MACA,KAAAC,OAAA,CAAAC,EAAA;IACA;IACAC,SAAA;MACA,SAAAb,cAAA,CAAAC,OAAA,CAAAa,IAAA;QACA,KAAAC,OAAA,MAAAC,EAAA;QACA;MACA;MACA,SAAAhB,cAAA,CAAAE,MAAA,CAAAY,IAAA;QACA,KAAAC,OAAA,MAAAC,EAAA;QACA;MACA;MACA,IAAAC,OAAA,QAAAD,EAAA;MACA,IAAAnB,OAAA,CAAAC,GAAA,CAAAoB,sBAAA;QACAD,OAAA,QAAAD,EAAA;MACA;MACAtB,OAAA,CAAAyB,KAAA;QACAC,KAAA,OAAAJ,EAAA;QACAC,OAAA;QACAI,YAAA;QACAC,gBAAA;QACAC,iBAAA,OAAAP,EAAA;QACAQ,kBAAA;QACAC,gBAAA,OAAAT,EAAA;QACAU,iBAAA;MACA,GAAAC,IAAA;QACA,KAAAC,MAAA,CAAAC,OAAA;QACA;UAAAC;QAAA,UAAAzC,aAAA;QACA,IAAAyC,KAAA;UACA,KAAAf,OAAA,MAAAC,EAAA;UACA,KAAAY,MAAA,CAAAG,KAAA;UACA;QACA;QACA,SAAAvB,QAAA,CAAAwB,QAAA;UACA,KAAAC,WAAA;QACA;UACA,KAAA7B,SAAA;QACA;MACA;IACA;IACA,MAAA6B,YAAAC,KAAA;MACA,KAAAlC,cAAA,CAAAG,YAAA,GAAA+B,KAAA;MACA,KAAAN,MAAA,CAAAC,OAAA;MACA,IAAAK,KAAA;QACA,KAAAnB,OAAA,MAAAC,EAAA;QACA,KAAAY,MAAA,CAAAG,KAAA;QACA;MACA;MAEA;QACA,MAAAI,GAAA,SAAA/C,SAAA,MAAAY,cAAA;QACA,KAAA4B,MAAA,CAAAG,KAAA;QACA,KAAAhB,OAAA,MAAAC,EAAA;QACA,KAAAL,OAAA,CAAAyB,OAAA;MACA,SAAAC,KAAA;QACAC,OAAA,CAAAC,GAAA,eAAAF,KAAA;MACA;;MAEA;MACA;MACA;MACA;MACA;MACA;IAEA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}