{"ast":null,"code":"import \"vant/es/overlay/style\";\nimport _Overlay from \"vant/es/overlay\";\nimport \"vant/es/icon/style\";\nimport _Icon from \"vant/es/icon\"; // eslint-disable-next-line\n/* eslint-disable */\nimport \"core-js/modules/es.array.push.js\";\nimport { qiangdan_post, qiangdanxiangqing_post } from \"@/API/user\";\nimport { mapGetters, mapMutations, mapState } from \"vuex\";\nimport { isLogin } from '@/utils/utis';\nexport default {\n  props: {\n    idx: {\n      type: Number,\n      default: 0\n    }\n  },\n  data() {\n    return {\n      qiangdan_show: false,\n      timer_shijian: \"\",\n      cartNum: 0,\n      listItem: [{\n        cls: \"home\",\n        name: this.$t(\"首页\"),\n        path: \"/home\",\n        icon: 'shouye',\n        src: require(\"@/assets/image/bottom/home.png\"),\n        srcSelect: require(`@/assets/${process.env.VUE_APP_ITEM_NAME}/home2.png`)\n      }, {\n        cls: \"commodity\",\n        name: this.$t(\"商品\"),\n        path: \"/commodity\",\n        icon: \"24gf-appsBig6\",\n        src: require(\"@/assets/image/bottom/chongzhi.png\"),\n        srcSelect: require(`@/assets/${process.env.VUE_APP_ITEM_NAME}/chongzhi2.png`)\n      },\n      // {\n      //   cls: \"shop\",\n      //   name: this.$t(\"店铺\"),\n      //   path: \"/shop\",\n      //   src: require('@/assets/image/bottom/company_normal.png'),\n      //   srcSelect: require('@/assets/image/bottom/company_normal2.png'),\n      // },\n      {\n        cla: \"cart\",\n        name: this.$t(\"购物车\"),\n        path: \"/cart\",\n        icon: 'gouwuchefill',\n        src: require(\"@/assets/image/bottom/renwu.png\"),\n        srcSelect: require(`@/assets/${process.env.VUE_APP_ITEM_NAME}/renwu2.png`)\n      }, {\n        cla: \"me\",\n        name: this.$t(\"我的\"),\n        path: \"/me\",\n        icon: \"wode\",\n        src: require(\"@/assets/image/bottom/wode.png\"),\n        srcSelect: require(`@/assets/${process.env.VUE_APP_ITEM_NAME}/wode2.png`)\n      }]\n    };\n  },\n  components: {\n    [_Icon.name]: _Icon,\n    [_Overlay.name]: _Overlay\n  },\n  activated() {\n    this.getChartNum();\n  },\n  mounted() {\n    this.getChartNum();\n  },\n  updated() {\n    this.getChartNum();\n  },\n  computed: mapState({\n    count: state => state.qiangdan.count\n  }),\n  methods: {\n    ...mapMutations([\"setQiangdan\"]),\n    ...mapMutations([\"qiangdan_status_sj\"]),\n    ...mapMutations([\"qiangdan_tanchuang_sj\"]),\n    getChartNum() {\n      let productList = this.$ls.get(\"productList\");\n      this.cartNum = isLogin() ? productList?.length : 0;\n      // this.cartNum = JSON.parse(\n      //     localStorage.getItem(\"productList\")\n      // )?.value.reduce(function (prev, cur) {\n      //     return (prev += cur.count);\n      // }, 0);\n    },\n    qiangdan_sj(e) {\n      const t = this;\n      this.qiangdan_status_sj(e);\n      qiangdan_post({}).then(res => {\n        // brush_time: 5\n        // orderId: \"3987503220907183731\"\n        var time = res.brush_time * 1000;\n        t.timer_shijian = setTimeout(function () {\n          t.qiangdan_xq(res.orderId);\n        }, time);\n      }).catch(function (err) {\n        // Toast('网络波动请刷新页面');\n        t.qiangdan_status_sj(false);\n      });\n    },\n    qiangdan_xq(e) {\n      var t = this;\n      qiangdanxiangqing_post({\n        orderId: e\n      }).then(res => {\n        this.qiangdan_status_sj(false);\n        this.setQiangdan(res);\n        this.qiangdan_tanchuang_sj(true);\n      }).catch(function (err) {\n        // Toast('网络波动请刷新页面');\n        t.qiangdan_status_sj(false);\n      });\n    },\n    change(item, index) {\n      if (this.$route.path !== item.path) {\n        this.$router.push({\n          path: item.path\n        });\n      }\n      this.$emit(\"change\", index);\n    }\n  },\n  watch: {\n    count(val) {\n      this.getChartNum();\n    }\n    // '$route'(form, to) {\n    //     if (to.path == '/language') {\n    //         console.log(`getStorage('lang') ::->`, getStorage('lang'));\n    //         // this.handleReload()\n    //         // this.$i18n.locale = 'en';\n    //         // // 'en'  'tw'  'cn'\n    //         // console.log(`this.$i18n ::->`, this.$i18n);\n    //     }\n    // }\n  },\n  beforeDestroy() {\n    clearTimeout(this.timer_shijian);\n  }\n};","map":{"version":3,"names":["qiangdan_post","qiangdanxiangqing_post","mapGetters","mapMutations","mapState","isLogin","props","idx","type","Number","default","data","qiangdan_show","timer_shijian","cartNum","listItem","cls","name","$t","path","icon","src","require","srcSelect","process","env","VUE_APP_ITEM_NAME","cla","components","_Icon","_Overlay","activated","getChartNum","mounted","updated","computed","count","state","qiangdan","methods","productList","$ls","get","length","qiangdan_sj","e","t","qiangdan_status_sj","then","res","time","brush_time","setTimeout","qiangdan_xq","orderId","catch","err","setQiangdan","qiangdan_tanchuang_sj","change","item","index","$route","$router","push","$emit","watch","val","beforeDestroy","clearTimeout"],"sources":["src/components/BottomNavigation/index.vue"],"sourcesContent":["<template>\r\n    <div class=\"footer yongqi\">\r\n        <div class=\"yongqi\" v-for=\"(item, index) of listItem\" :key=\"index\" :class=\"[item.cls, { on: index === idx }]\"\r\n            @click=\"change(item, index)\" style=\"\r\n                        display: flex;\r\n                        flex-direction: column;\r\n                        justify-content: center;\r\n                        align-items: center;\r\n                    \">\r\n            <div class=\"image\">\r\n                <img :src=\"index === idx ? item.srcSelect : item.src\"  />\r\n                <span class=\"activeKey\" v-if=\"index == 2 && cartNum\">{{\r\n                    cartNum > 99 ? \"99+\" : cartNum\r\n                }}</span>\r\n            </div>\r\n            <!--      <div><i :class=\"index===idx?item.iconSelect:item.icon\" v-if=\"!showIconOrSrc\"></i></div>-->\r\n            <span :class=\"['colorChange', { on: index === idx }]\">\r\n                {{ item.name }}\r\n            </span>\r\n        </div>\r\n        <!--    <div class=\"qiangdan\">-->\r\n        <!--      <img v-if=\"!$store.state.qiangdan.qiangdan_status\" @click=\"qiangdan_sj(true)\" class=\"qiangdan1\" src=\"@/assets/image/bottom/qiangdan.png\" />-->\r\n        <!--      <img v-if=\"$store.state.qiangdan.qiangdan_status\" class=\"qiangdan1 rotateImages\" src=\"@/assets/image/bottom/refresh.png\" />-->\r\n        <!--    </div>-->\r\n    </div>\r\n</template>\r\n<script type=\"text/javascript\">\r\n// eslint-disable-next-line\r\n/* eslint-disable */\r\nimport { Overlay, Toast, Icon } from \"vant\";\r\nimport { qiangdan_post, qiangdanxiangqing_post } from \"@/API/user\";\r\nimport { mapGetters, mapMutations, mapState } from \"vuex\";\r\nimport { isLogin } from '@/utils/utis'\r\nexport default {\r\n    props: {\r\n        idx: {\r\n            type: Number,\r\n            default: 0,\r\n        },\r\n    },\r\n    data() {\r\n        return {\r\n            qiangdan_show: false,\r\n            timer_shijian: \"\",\r\n            cartNum: 0,\r\n            listItem: [\r\n                {\r\n                    cls: \"home\",\r\n                    name: this.$t(\"首页\"),\r\n                    path: \"/home\",\r\n                    icon: 'shouye',\r\n                    src: require(\"@/assets/image/bottom/home.png\"),\r\n                    srcSelect: require(`@/assets/${process.env.VUE_APP_ITEM_NAME}/home2.png`),\r\n                },\r\n                {\r\n                    cls: \"commodity\",\r\n                    name: this.$t(\"商品\"),\r\n                    path: \"/commodity\",\r\n                    icon: \"24gf-appsBig6\",\r\n                    src: require(\"@/assets/image/bottom/chongzhi.png\"),\r\n                    srcSelect: require(`@/assets/${process.env.VUE_APP_ITEM_NAME}/chongzhi2.png`),\r\n                },\r\n                // {\r\n                //   cls: \"shop\",\r\n                //   name: this.$t(\"店铺\"),\r\n                //   path: \"/shop\",\r\n                //   src: require('@/assets/image/bottom/company_normal.png'),\r\n                //   srcSelect: require('@/assets/image/bottom/company_normal2.png'),\r\n                // },\r\n                {\r\n                    cla: \"cart\",\r\n                    name: this.$t(\"购物车\"),\r\n                    path: \"/cart\",\r\n                    icon: 'gouwuchefill',\r\n                    src: require(\"@/assets/image/bottom/renwu.png\"),\r\n                    srcSelect: require(`@/assets/${process.env.VUE_APP_ITEM_NAME}/renwu2.png`),\r\n                },\r\n                {\r\n                    cla: \"me\",\r\n                    name: this.$t(\"我的\"),\r\n                    path: \"/me\",\r\n                    icon: \"wode\",\r\n                    src: require(\"@/assets/image/bottom/wode.png\"),\r\n                    srcSelect: require(`@/assets/${process.env.VUE_APP_ITEM_NAME}/wode2.png`),\r\n                },\r\n            ]\r\n        };\r\n    },\r\n    components: {\r\n        [Icon.name]: Icon,\r\n        [Overlay.name]: Overlay,\r\n    },\r\n    activated() {\r\n        this.getChartNum();\r\n    },\r\n    mounted() {\r\n        this.getChartNum();\r\n    },\r\n    updated() {\r\n        this.getChartNum();\r\n    },\r\n    computed: mapState({\r\n        count: (state) => state.qiangdan.count,\r\n    }),\r\n    methods: {\r\n        ...mapMutations([\"setQiangdan\"]),\r\n        ...mapMutations([\"qiangdan_status_sj\"]),\r\n        ...mapMutations([\"qiangdan_tanchuang_sj\"]),\r\n        getChartNum() {\r\n            let productList = this.$ls.get(\"productList\")\r\n            this.cartNum = isLogin() ? productList?.length : 0\r\n            // this.cartNum = JSON.parse(\r\n            //     localStorage.getItem(\"productList\")\r\n            // )?.value.reduce(function (prev, cur) {\r\n            //     return (prev += cur.count);\r\n            // }, 0);\r\n\r\n        },\r\n        qiangdan_sj(e) {\r\n            const t = this;\r\n            this.qiangdan_status_sj(e);\r\n            qiangdan_post({})\r\n                .then((res) => {\r\n                    // brush_time: 5\r\n                    // orderId: \"3987503220907183731\"\r\n                    var time = res.brush_time * 1000;\r\n                    t.timer_shijian = setTimeout(function () {\r\n                        t.qiangdan_xq(res.orderId);\r\n                    }, time);\r\n                })\r\n                .catch(function (err) {\r\n                    // Toast('网络波动请刷新页面');\r\n                    t.qiangdan_status_sj(false);\r\n                });\r\n        },\r\n        qiangdan_xq(e) {\r\n            var t = this;\r\n            qiangdanxiangqing_post({ orderId: e })\r\n                .then((res) => {\r\n                    this.qiangdan_status_sj(false);\r\n                    this.setQiangdan(res);\r\n                    this.qiangdan_tanchuang_sj(true);\r\n                })\r\n                .catch(function (err) {\r\n                    // Toast('网络波动请刷新页面');\r\n                    t.qiangdan_status_sj(false);\r\n                });\r\n        },\r\n        change(item, index) {\r\n            if (this.$route.path !== item.path) {\r\n                this.$router.push({ path: item.path });\r\n            }\r\n            this.$emit(\"change\", index);\r\n        },\r\n    },\r\n    watch: {\r\n        count(val) {\r\n            this.getChartNum()\r\n        },\r\n        // '$route'(form, to) {\r\n        //     if (to.path == '/language') {\r\n        //         console.log(`getStorage('lang') ::->`, getStorage('lang'));\r\n        //         // this.handleReload()\r\n        //         // this.$i18n.locale = 'en';\r\n        //         // // 'en'  'tw'  'cn'\r\n        //         // console.log(`this.$i18n ::->`, this.$i18n);\r\n        //     }\r\n        // }\r\n    },\r\n    beforeDestroy() {\r\n        clearTimeout(this.timer_shijian);\r\n    },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.rotate_bg {\r\n    width: 500px;\r\n    height: 500px;\r\n    background: #59d1b6;\r\n    margin: 200px auto;\r\n}\r\n\r\n.rotateImages {\r\n    -webkit-animation: myRotate 1s linear infinite;\r\n    animation: myRotate 1s linear infinite;\r\n}\r\n\r\n@-webkit-keyframes myRotate {\r\n    0% {\r\n        -webkit-transform: rotate(0deg);\r\n    }\r\n\r\n    50% {\r\n        -webkit-transform: rotate(180deg);\r\n    }\r\n\r\n    100% {\r\n        -webkit-transform: rotate(360deg);\r\n    }\r\n}\r\n\r\n@keyframes myRotate {\r\n    0% {\r\n        -webkit-transform: rotate(0deg);\r\n    }\r\n\r\n    50% {\r\n        -webkit-transform: rotate(180deg);\r\n    }\r\n\r\n    100% {\r\n        -webkit-transform: rotate(360deg);\r\n    }\r\n}\r\n\r\n.qiangdan {\r\n    width: 44px;\r\n    height: 44px;\r\n    background: white;\r\n    border-radius: 50%;\r\n    position: absolute;\r\n    bottom: 27px;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n\r\n    //z-index: 999;\r\n    .qiangdan1 {\r\n        width: 38px;\r\n        height: 38px;\r\n    }\r\n}\r\n\r\n.footer {\r\n    box-shadow: 0 -2px 4px rgba(0, 0, 0, 0.08);\r\n    display: flex;\r\n    justify-content: center;\r\n    // position: fixed;\r\n\r\n    /*left: 0;*/\r\n    bottom: 0;\r\n    //box-sizing: border-box;\r\n    background: #ffffff;\r\n    /*max-width: 100%;*/\r\n    width: 375px;\r\n    height: 56px;\r\n    //z-index: 2000;\r\n}\r\n\r\n.yongqi {\r\n    flex: 1;\r\n    padding: 5px;\r\n    box-sizing: border-box;\r\n    font-size: 12px;\r\n    width: 100%;\r\n}\r\n\r\n.image {\r\n    position: relative;\r\n    .icon {\r\n        font-size: 25px;\r\n    }\r\n}\r\n\r\n.image img {\r\n    width: 20px;\r\n    height: 20px;\r\n    //background: white;\r\n}\r\n\r\ndiv>span {\r\n    display: block;\r\n    font-style: normal;\r\n    font-weight: 400;\r\n    font-size: 10px;\r\n    line-height: 12px;\r\n    /* identical to box height */\r\n    position: relative;\r\n    text-align: center;\r\n    color: #aaaaaa;\r\n    margin-top: 4px;\r\n    white-space: nowrap;\r\n\r\n}\r\n\r\n.activeKey {\r\n    position: absolute;\r\n    min-width: 15px;\r\n    min-height: 15px;\r\n    line-height: 15px;\r\n    padding: 1px;\r\n    text-align: center;\r\n    border-radius: 10px;\r\n    background-color: red;\r\n    color: #ffffff;\r\n    top: -13px;\r\n    right: -13px;\r\n}\r\n\r\n.on {\r\n    color: var(--main-color);\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}