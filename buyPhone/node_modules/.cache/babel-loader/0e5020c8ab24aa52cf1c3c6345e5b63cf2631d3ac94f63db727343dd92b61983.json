{"ast":null,"code":"import \"vant/es/pull-refresh/style\";\nimport _PullRefresh from \"vant/es/pull-refresh\";\nimport \"vant/es/swipe-cell/style\";\nimport _SwipeCell from \"vant/es/swipe-cell\";\nimport \"vant/es/empty/style\";\nimport _Empty from \"vant/es/empty\";\nimport \"vant/es/list/style\";\nimport _List from \"vant/es/list\";\nimport \"vant/es/nav-bar/style\";\nimport _NavBar from \"vant/es/nav-bar\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.reduce.js\";\nimport GoodsItemTwo from '@/components/GoodsItemTwo/index.vue';\nimport { isLogin } from '@/utils/utis';\nimport { keepGoodsList } from '@/API/user';\nimport { keepGoodsDel } from \"@/API/commodity\";\nexport default {\n  name: 'CollectGoods',\n  components: {\n    [_NavBar.name]: _NavBar,\n    [_List.name]: _List,\n    [_Empty.name]: _Empty,\n    [_SwipeCell.name]: _SwipeCell,\n    [_PullRefresh.name]: _PullRefresh,\n    GoodsItemTwo\n  },\n  data() {\n    return {\n      list: [],\n      loading: false,\n      finished: false,\n      refreshing: false,\n      pageNum: 1,\n      pageSize: 10\n    };\n  },\n  created() {\n    if (!isLogin()) {\n      this.$router.push('/');\n    }\n    // this.onLoad();\n  },\n  methods: {\n    onRefresh() {\n      // 清空列表数据\n      this.finished = false;\n      this.pageNum = 1;\n      // 重新加载数据\n      // 将 loading 设置为 true，表示处于加载状态\n      this.loading = true;\n      this.onLoad();\n    },\n    onLoad() {\n      if (this.refreshing) {\n        this.list = [];\n        this.refreshing = false;\n      }\n      this.getTableList();\n    },\n    getTableList() {\n      const params = {\n        pageNum: this.pageNum,\n        pageSize: this.pageSize\n      };\n      keepGoodsList(params).then(res => {\n        const {\n          pageList\n        } = res;\n        console.log(`pageList ::->`, pageList);\n        this.list = this.pageNum === 1 ? pageList : [...this.list, ...pageList];\n        this.pageNum++;\n        this.loading = false;\n        if (pageList.length < this.pageSize) {\n          this.finished = true;\n        }\n        var obj = {};\n        this.list = this.list.reduce((prev, cur) => {\n          obj[cur.id] ? \"\" : obj[cur.id] = true && prev.push(cur);\n          return prev;\n        }, []);\n      }).catch(() => {\n        this.loading = false;\n        this.finished = true;\n      });\n    },\n    delHandle(data) {\n      this.refreshing = true;\n      keepGoodsDel({\n        sellerGoodsId: data.id\n      }).then(() => {\n        this.onRefresh();\n      });\n    }\n  }\n};","map":{"version":3,"names":["GoodsItemTwo","isLogin","keepGoodsList","keepGoodsDel","name","components","_NavBar","_List","_Empty","_SwipeCell","_PullRefresh","data","list","loading","finished","refreshing","pageNum","pageSize","created","$router","push","methods","onRefresh","onLoad","getTableList","params","then","res","pageList","console","log","length","obj","reduce","prev","cur","id","catch","delHandle","sellerGoodsId"],"sources":["src/page/CollectGoods/index.vue"],"sourcesContent":["<template>\r\n    <div class=\"page-content\">\r\n        <van-nav-bar safe-area-inset-top fixed :title=\"$t('商品收藏')\" left-arrow @click-left=\"() => $router.back()\" />\r\n        <div style=\"width: 100%;\" class=\"h46\"></div>\r\n        <van-pull-refresh class=\"pull-content\" v-model=\"refreshing\" @refresh=\"onRefresh\" :pulling-text=\"$t('下拉即可刷新')\"\r\n            :loosing-text=\"$t('释放即可刷新')\" :loading-text=\"$t('加载中')\">\r\n            <van-list v-model=\"loading\" :finished=\"finished\" :finished-text=\"list.length ? $t('没有更多了') : ''\"\r\n                @load=\"onLoad\" :loading-text=\"$t('加载中')\">\r\n                <div v-if=\"list.length\" class=\"list-content\">\r\n                    <!-- <goods-item-two v-for=\"item in list\" :key=\"item.sellerGoodsId\" :goods-data=\"item\" /> -->\r\n                    <van-swipe-cell v-for=\"item in list\" :key=\"item.sellerGoodsId\">\r\n                        <goods-item-two :goods-data=\"item\" />\r\n                        <template #right>\r\n                            <div class=\"btn\" @click.stop=\"delHandle(item)\">{{ $t('删除') }}</div>\r\n                        </template>\r\n                    </van-swipe-cell>\r\n                </div>\r\n                <van-empty v-else :description=\"$t('暂无数据')\" />\r\n            </van-list>\r\n        </van-pull-refresh>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { NavBar, List, PullRefresh, Empty, SwipeCell } from 'vant';\r\nimport GoodsItemTwo from '@/components/GoodsItemTwo/index.vue'\r\nimport { isLogin } from '@/utils/utis'\r\nimport {\r\n    keepGoodsList\r\n} from '@/API/user'\r\nimport { keepGoodsDel } from \"@/API/commodity\";\r\nexport default {\r\n    name: 'CollectGoods',\r\n    components: {\r\n        [NavBar.name]: NavBar,\r\n        [List.name]: List,\r\n        [Empty.name]: Empty,\r\n        [SwipeCell.name]: SwipeCell,\r\n        [PullRefresh.name]: PullRefresh,\r\n        GoodsItemTwo\r\n    },\r\n    data() {\r\n        return {\r\n            list: [],\r\n            loading: false,\r\n            finished: false,\r\n            refreshing: false,\r\n            pageNum: 1,\r\n            pageSize: 10\r\n        }\r\n    },\r\n    created() {\r\n        if (!isLogin()) {\r\n            this.$router.push('/')\r\n        }\r\n        // this.onLoad();\r\n    },\r\n    methods: {\r\n        onRefresh() {\r\n            // 清空列表数据\r\n            this.finished = false;\r\n            this.pageNum = 1\r\n            // 重新加载数据\r\n            // 将 loading 设置为 true，表示处于加载状态\r\n            this.loading = true;\r\n            this.onLoad();\r\n        },\r\n        onLoad() {\r\n            if (this.refreshing) {\r\n                this.list = [];\r\n                this.refreshing = false;\r\n            }\r\n            this.getTableList()\r\n        },\r\n        getTableList() {\r\n            const params = {\r\n                pageNum: this.pageNum,\r\n                pageSize: this.pageSize\r\n            }\r\n\r\n            keepGoodsList(params).then(res => {\r\n                const { pageList } = res\r\n                console.log(`pageList ::->`, pageList);\r\n                this.list = this.pageNum === 1 ? pageList : [...this.list, ...pageList]\r\n                this.pageNum++\r\n                this.loading = false\r\n                if (pageList.length < this.pageSize) {\r\n                    this.finished = true\r\n                }\r\n                var obj = {};\r\n                this.list = this.list.reduce((prev, cur) => {\r\n                    obj[cur.id] ? \"\" : (obj[cur.id] = true && prev.push(cur));\r\n                    return prev;\r\n                }, []);\r\n            }).catch(() => {\r\n                this.loading = false\r\n                this.finished = true\r\n            })\r\n        },\r\n        delHandle(data) {\r\n            this.refreshing = true\r\n            keepGoodsDel({ sellerGoodsId: data.id }).then(() => {\r\n                this.onRefresh()\r\n            })\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.page-content {\r\n    width: 100%;\r\n\r\n    * {\r\n        box-sizing: border-box;\r\n    }\r\n\r\n    .list-content {\r\n        padding: 0 15px;\r\n    }\r\n\r\n    .pull-content {\r\n        min-height: calc(100vh - 46px);\r\n    }\r\n\r\n    /deep/ .van-swipe-cell__right {\r\n        display: flex;\r\n        align-items: center;\r\n        background-color: #fff;\r\n\r\n        >.btn {\r\n            height: 100%;\r\n            width: 80px;\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            color: #fff;\r\n            font-size: 12px;\r\n            // background-color: var(--main-color);\r\n            background: var(--main-color);\r\n        }\r\n    }\r\n}\r\n</style>\r\n"],"mappings":";;;;;;;;;;;;;AAyBA,OAAAA,YAAA;AACA,SAAAC,OAAA;AACA,SACAC,aAAA,QACA;AACA,SAAAC,YAAA;AACA;EACAC,IAAA;EACAC,UAAA;IACA,CAAAC,OAAA,CAAAF,IAAA,GAAAE,OAAA;IACA,CAAAC,KAAA,CAAAH,IAAA,GAAAG,KAAA;IACA,CAAAC,MAAA,CAAAJ,IAAA,GAAAI,MAAA;IACA,CAAAC,UAAA,CAAAL,IAAA,GAAAK,UAAA;IACA,CAAAC,YAAA,CAAAN,IAAA,GAAAM,YAAA;IACAV;EACA;EACAW,KAAA;IACA;MACAC,IAAA;MACAC,OAAA;MACAC,QAAA;MACAC,UAAA;MACAC,OAAA;MACAC,QAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAjB,OAAA;MACA,KAAAkB,OAAA,CAAAC,IAAA;IACA;IACA;EACA;EACAC,OAAA;IACAC,UAAA;MACA;MACA,KAAAR,QAAA;MACA,KAAAE,OAAA;MACA;MACA;MACA,KAAAH,OAAA;MACA,KAAAU,MAAA;IACA;IACAA,OAAA;MACA,SAAAR,UAAA;QACA,KAAAH,IAAA;QACA,KAAAG,UAAA;MACA;MACA,KAAAS,YAAA;IACA;IACAA,aAAA;MACA,MAAAC,MAAA;QACAT,OAAA,OAAAA,OAAA;QACAC,QAAA,OAAAA;MACA;MAEAf,aAAA,CAAAuB,MAAA,EAAAC,IAAA,CAAAC,GAAA;QACA;UAAAC;QAAA,IAAAD,GAAA;QACAE,OAAA,CAAAC,GAAA,kBAAAF,QAAA;QACA,KAAAhB,IAAA,QAAAI,OAAA,SAAAY,QAAA,YAAAhB,IAAA,KAAAgB,QAAA;QACA,KAAAZ,OAAA;QACA,KAAAH,OAAA;QACA,IAAAe,QAAA,CAAAG,MAAA,QAAAd,QAAA;UACA,KAAAH,QAAA;QACA;QACA,IAAAkB,GAAA;QACA,KAAApB,IAAA,QAAAA,IAAA,CAAAqB,MAAA,EAAAC,IAAA,EAAAC,GAAA;UACAH,GAAA,CAAAG,GAAA,CAAAC,EAAA,SAAAJ,GAAA,CAAAG,GAAA,CAAAC,EAAA,YAAAF,IAAA,CAAAd,IAAA,CAAAe,GAAA;UACA,OAAAD,IAAA;QACA;MACA,GAAAG,KAAA;QACA,KAAAxB,OAAA;QACA,KAAAC,QAAA;MACA;IACA;IACAwB,UAAA3B,IAAA;MACA,KAAAI,UAAA;MACAZ,YAAA;QAAAoC,aAAA,EAAA5B,IAAA,CAAAyB;MAAA,GAAAV,IAAA;QACA,KAAAJ,SAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}