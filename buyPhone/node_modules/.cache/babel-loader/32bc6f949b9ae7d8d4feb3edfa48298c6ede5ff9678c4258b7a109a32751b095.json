{"ast":null,"code":"import \"vant/es/toast/style\";\nimport _Toast from \"vant/es/toast\";\nimport \"vant/es/dialog/style\";\nimport _Dialog from \"vant/es/dialog\";\nimport \"vant/es/action-sheet/style\";\nimport _ActionSheet from \"vant/es/action-sheet\";\nimport { orderCancel } from '@/API/user';\nexport default {\n  name: 'CancelDialog',\n  components: {\n    [_ActionSheet.name]: _ActionSheet,\n    [_Dialog.name]: _Dialog\n  },\n  props: {\n    dialogShow: {\n      type: Boolean,\n      required: true,\n      default: false\n    },\n    dialogData: {\n      type: Object,\n      required: true,\n      default: () => {}\n    }\n  },\n  computed: {\n    visible: {\n      get() {\n        return this.dialogShow;\n      },\n      set() {\n        this.$emit('update:dialogShow', false);\n      }\n    }\n  },\n  watch: {\n    visible(val) {\n      if (!val) {\n        this.currentIndex = null;\n      }\n    }\n  },\n  data() {\n    return {\n      checkIcon: require('@/assets/image/me/check1.png'),\n      currentIndex: null,\n      reasonData: [{\n        id: 1,\n        txt: this.$t('不想要了')\n      }, {\n        id: 2,\n        txt: this.$t('下错商品')\n      }, {\n        id: 3,\n        txt: this.$t('订单重复')\n      }, {\n        id: 4,\n        txt: this.$t('无法签收')\n      }, {\n        id: 5,\n        txt: this.$t('其他原因')\n      }]\n    };\n  },\n  methods: {\n    cancelHandle() {\n      _Dialog.confirm({\n        title: this.$t('提示'),\n        message: this.$t('确认取消吗？'),\n        confirmButtonText: this.$t('确认'),\n        cancelButtonText: this.$t('取消')\n      }).then(() => {\n        _Toast.loading({\n          duration: 0,\n          message: this.$t('提交中'),\n          forbidClick: true\n        });\n        const params = {\n          orderId: this.dialogData.id,\n          returnReason: this.reasonData[this.currentIndex].id\n        };\n        orderCancel(params).then(() => {\n          _Toast.clear();\n          this.$emit('update:dialogShow', false);\n          this.$emit('done', false);\n        }).catch(() => {\n          _Toast.clear();\n        });\n      }).catch(() => {\n        this.$emit('update:dialogShow', false);\n      });\n    }\n  }\n};","map":{"version":3,"names":["orderCancel","name","components","_ActionSheet","_Dialog","props","dialogShow","type","Boolean","required","default","dialogData","Object","computed","visible","get","set","$emit","watch","val","currentIndex","data","checkIcon","require","reasonData","id","txt","$t","methods","cancelHandle","confirm","title","message","confirmButtonText","cancelButtonText","then","_Toast","loading","duration","forbidClick","params","orderId","returnReason","clear","catch"],"sources":["src/page/Order/components/CancelDialog.vue"],"sourcesContent":["<template>\r\n  <div class=\"dialog-content\">\r\n    <van-action-sheet v-model=\"visible\" :title=\"$t('请选择订单取消原因')\" :round=\"false\">\r\n      <div class=\"cancel-content\">\r\n        <div class=\"item\" v-for=\"(item, index) in reasonData\" :key=\"index\" :class=\"{'active': currentIndex === index}\" @click=\"currentIndex = index\">{{ item.txt }} <img v-if=\"currentIndex === index\" :src=\"checkIcon\" alt=\"\" /></div>\r\n      </div>\r\n      <div class=\"btn-content\">\r\n        <div class=\"btn\" :class=\"{'active': currentIndex !== null}\" @click=\"cancelHandle\">{{ $t('确认取消') }}</div>\r\n      </div>\r\n    </van-action-sheet>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ActionSheet, Dialog, Toast } from 'vant'\r\nimport {\r\n  orderCancel\r\n} from '@/API/user'\r\nexport default {\r\n  name: 'CancelDialog',\r\n  components:{\r\n    [ActionSheet.name]:ActionSheet,\r\n    [Dialog.name]:Dialog\r\n  },\r\n  props: {\r\n    dialogShow: {\r\n      type: Boolean,\r\n      required: true,\r\n      default: false\r\n    },\r\n    dialogData: {\r\n      type: Object,\r\n      required: true,\r\n      default: () => {}\r\n    }\r\n  },\r\n  computed: {\r\n    visible: {\r\n      get() {\r\n        return this.dialogShow\r\n      },\r\n      set() {\r\n        this.$emit('update:dialogShow', false)\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    visible(val) {\r\n      if (!val) {\r\n        this.currentIndex = null\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      checkIcon: require('@/assets/image/me/check1.png'),\r\n      currentIndex: null,\r\n      reasonData: [{\r\n        id: 1,\r\n        txt: this.$t('不想要了')\r\n      }, {\r\n        id: 2,\r\n        txt: this.$t('下错商品')\r\n      }, {\r\n        id: 3,\r\n        txt: this.$t('订单重复')\r\n      }, {\r\n        id: 4,\r\n        txt: this.$t('无法签收')\r\n      }, {\r\n        id: 5,\r\n        txt: this.$t('其他原因')\r\n      }]\r\n    }\r\n  },\r\n  methods: {\r\n    cancelHandle() {\r\n      Dialog.confirm({\r\n        title: this.$t('提示'),\r\n        message: this.$t('确认取消吗？'),\r\n        confirmButtonText: this.$t('确认'),\r\n        cancelButtonText: this.$t('取消')\r\n      }).then(() => {\r\n        Toast.loading({\r\n          duration: 0,\r\n          message: this.$t('提交中'),\r\n          forbidClick: true\r\n        })\r\n\r\n        const params = {\r\n          orderId: this.dialogData.id,\r\n          returnReason: this.reasonData[this.currentIndex].id\r\n        }\r\n\r\n        orderCancel(params).then(() => {\r\n          Toast.clear()\r\n          this.$emit('update:dialogShow', false)\r\n          this.$emit('done', false)\r\n        }).catch(() => {\r\n          Toast.clear()\r\n        })\r\n      }).catch(() => {\r\n        this.$emit('update:dialogShow', false)\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .dialog-content {\r\n    * {\r\n      box-sizing: border-box;\r\n    }\r\n    /deep/ .van-action-sheet__close {\r\n      color: #333;\r\n      font-size: 14px;\r\n    }\r\n    .cancel-content {\r\n      padding: 0 10px;\r\n      > .item {\r\n        width: 100%;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        padding: 15px 0;\r\n        color: #999;\r\n        font-size: 16px;\r\n        border-top: 1px solid #eee;\r\n        > img {\r\n          width: 14px;\r\n          height: 14px;\r\n          margin-left: 20px;\r\n        }\r\n        &.active {\r\n        //   color: var(--main-color);\r\n        color: var(--main-color);\r\n        }\r\n      }\r\n    }\r\n    .btn-content {\r\n      padding: 10px 10px 30px 10px;\r\n      > .btn {\r\n        width: 100%;\r\n        height: 44px;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        border-radius: 4px;\r\n        background-color: #eee;\r\n        font-size: 16px;\r\n        color: #888CA1;\r\n        pointer-events: none;\r\n        &.active {\r\n          background-color: var(--main-color);\r\n          color: #fff;\r\n          pointer-events: auto;\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>\r\n"],"mappings":";;;;;;AAeA,SACAA,WAAA,QACA;AACA;EACAC,IAAA;EACAC,UAAA;IACA,CAAAC,YAAA,CAAAF,IAAA,GAAAE,YAAA;IACA,CAAAC,OAAA,CAAAH,IAAA,GAAAG;EACA;EACAC,KAAA;IACAC,UAAA;MACAC,IAAA,EAAAC,OAAA;MACAC,QAAA;MACAC,OAAA;IACA;IACAC,UAAA;MACAJ,IAAA,EAAAK,MAAA;MACAH,QAAA;MACAC,OAAA,EAAAA,CAAA;IACA;EACA;EACAG,QAAA;IACAC,OAAA;MACAC,IAAA;QACA,YAAAT,UAAA;MACA;MACAU,IAAA;QACA,KAAAC,KAAA;MACA;IACA;EACA;EACAC,KAAA;IACAJ,QAAAK,GAAA;MACA,KAAAA,GAAA;QACA,KAAAC,YAAA;MACA;IACA;EACA;EACAC,KAAA;IACA;MACAC,SAAA,EAAAC,OAAA;MACAH,YAAA;MACAI,UAAA;QACAC,EAAA;QACAC,GAAA,OAAAC,EAAA;MACA;QACAF,EAAA;QACAC,GAAA,OAAAC,EAAA;MACA;QACAF,EAAA;QACAC,GAAA,OAAAC,EAAA;MACA;QACAF,EAAA;QACAC,GAAA,OAAAC,EAAA;MACA;QACAF,EAAA;QACAC,GAAA,OAAAC,EAAA;MACA;IACA;EACA;EACAC,OAAA;IACAC,aAAA;MACAzB,OAAA,CAAA0B,OAAA;QACAC,KAAA,OAAAJ,EAAA;QACAK,OAAA,OAAAL,EAAA;QACAM,iBAAA,OAAAN,EAAA;QACAO,gBAAA,OAAAP,EAAA;MACA,GAAAQ,IAAA;QACAC,MAAA,CAAAC,OAAA;UACAC,QAAA;UACAN,OAAA,OAAAL,EAAA;UACAY,WAAA;QACA;QAEA,MAAAC,MAAA;UACAC,OAAA,OAAA9B,UAAA,CAAAc,EAAA;UACAiB,YAAA,OAAAlB,UAAA,MAAAJ,YAAA,EAAAK;QACA;QAEAzB,WAAA,CAAAwC,MAAA,EAAAL,IAAA;UACAC,MAAA,CAAAO,KAAA;UACA,KAAA1B,KAAA;UACA,KAAAA,KAAA;QACA,GAAA2B,KAAA;UACAR,MAAA,CAAAO,KAAA;QACA;MACA,GAAAC,KAAA;QACA,KAAA3B,KAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}