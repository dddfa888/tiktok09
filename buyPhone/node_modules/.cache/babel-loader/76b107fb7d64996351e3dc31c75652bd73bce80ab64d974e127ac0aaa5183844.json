{"ast":null,"code":"import \"vant/es/popup/style\";\nimport _Popup from \"vant/es/popup\";\nimport \"vant/es/nav-bar/style\";\nimport _NavBar from \"vant/es/nav-bar\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport EnterPassword from \"@/components/EnterPassword/index.vue\";\nimport { huoquyue_post, shifoushzhi_zijinmima_post } from \"@/API/user\";\nimport { orderPay } from \"@/API/commodity\";\nimport { priceFormat } from '@/utils/utis';\nexport default {\n  data() {\n    return {\n      money: 0,\n      pwtStatus: false,\n      orderList: [],\n      total: 0,\n      payMethod: [{\n        name: this.$t('余额'),\n        balance: '',\n        selected: true\n      }, {\n        name: 'PayPal',\n        balance: this.$t('您所在的地区尚未开放'),\n        selected: false\n      }, {\n        name: 'Visa',\n        balance: this.$t('您所在的地区尚未开放'),\n        selected: false\n      }, {\n        name: 'Mastercard',\n        balance: this.$t('您所在的地区尚未开放'),\n        selected: false\n      }],\n      icons: [require('@/assets/image/public/qianbao.png'), require('@/assets/image/public/pay.png'), require('@/assets/image/public/visa.png'), require('@/assets/image/public/master.png')],\n      priceFormat\n    };\n  },\n  components: {\n    [_NavBar.name]: _NavBar,\n    [_Popup.name]: _Popup,\n    [EnterPassword.name]: EnterPassword\n  },\n  mounted() {\n    this.getMoneyInfo();\n    this.orderList = JSON.parse(this.$route.query.orderList);\n    this.total = this.$route.query.total;\n    localStorage.removeItem(\"cartList\");\n    //   localStorage.removeItem(\"productList\");\n    // console.log(\n    //   \" 比较->\",\n    //   this.RemoveSameItem(\n    //     this.$ls.get(\"cartList\"),\n    //     this.orderList,\n    //     \"checkedAll\"\n    //   )\n    // );\n  },\n  created() {},\n  methods: {\n    // RemoveSameItem(listOne, listTwo, key) {\n    //   let newList = [];\n    //   loop: for (let itemOne of listOne) {\n    //     for (let itemTwo of listTwo) {\n    //       if (itemOne[key] == itemTwo[key]) {\n    //         continue loop;\n    //       }\n    //     }\n    //     newList.push(itemOne);\n    //   }\n    //   return newList.concat(listTwo);\n    // },\n    clear() {\n      // const list=[]\n      // this.$ls.get(\"cartList\") = list;\n    },\n    onClickLeft() {\n      history.go(-2);\n    },\n    //获取资金密码\n    getMoneyInfo() {\n      huoquyue_post().then(res => {\n        this.money = res.money;\n      });\n    },\n    //pay\n    handlePay() {\n      shifoushzhi_zijinmima_post({}).then(res => {\n        if (res.safeword == 1) {\n          this.pwtStatus = true;\n        } else {\n          this.$router.push({\n            path: \"/FundPasswordSettings\"\n          });\n        }\n      });\n    },\n    //输入完密码\n    getPassword(value) {\n      let data = {\n        safeword: value.substring(0, 6),\n        orderId: \"\"\n      };\n      this.orderList.forEach(item => {\n        data.orderId += item.orderId + \",\";\n      });\n      let productList = this.$ls.get(\"productList\") || [];\n      const ids = this.$route.query.ids || [];\n      // 购物车多个物品时\n      // 我也不知道为啥循环一次删不完  就多循环两次...\n      productList.forEach((item, index) => {\n        if (ids?.includes(item.id)) {\n          productList.splice(index, 1);\n        }\n      });\n      // 我也不知道为啥循环一次删不完  就多循环两次...\n      productList.forEach((item, index) => {\n        if (ids?.includes(item.id)) {\n          productList.splice(index, 1);\n        }\n      });\n      // 我也不知道为啥循环一次删不完  就多循环两次...\n      productList.forEach((item, index) => {\n        if (ids?.includes(item.id)) {\n          productList.splice(index, 1);\n        }\n      });\n      orderPay(data).then(() => {\n        // 如果购物车物品跟单独购买的商品一样时会把购物车那个商品清了, \n        // 如果不需要这个判断isCart=0是单独购买 isCart=1是购物车点进来的购买\n        this.$ls.set(\"productList\", productList);\n        this.$router.push({\n          path: \"/SuccessfulOperation\",\n          query: {\n            orderId: data.orderId,\n            isCart: this.$route.query?.isCart || 0\n          }\n        });\n      });\n    }\n  }\n};","map":{"version":3,"names":["EnterPassword","huoquyue_post","shifoushzhi_zijinmima_post","orderPay","priceFormat","data","money","pwtStatus","orderList","total","payMethod","name","$t","balance","selected","icons","require","components","_NavBar","_Popup","mounted","getMoneyInfo","JSON","parse","$route","query","localStorage","removeItem","created","methods","clear","onClickLeft","history","go","then","res","handlePay","safeword","$router","push","path","getPassword","value","substring","orderId","forEach","item","productList","$ls","get","ids","index","includes","id","splice","set","isCart"],"sources":["src/page/PendingPayment/index.vue"],"sourcesContent":["<template>\r\n    <div class=\"PendingPayment\">\r\n        <van-nav-bar safe-area-inset-top fixed left-arrow @click-left=\"onClickLeft\" />\r\n        <div class=\"pay-header\">\r\n            <div class=\"title\">\r\n                {{ $t(\"待付款\") }}\r\n            </div>\r\n            <!-- <div class=\"text\"> The order will be closed automatically</div> -->\r\n        </div>\r\n        <div class=\"pay-list\">\r\n            <div class=\"header-title\">\r\n                {{ $t(\"付款方式\") }}\r\n            </div>\r\n            <div class=\"list\">\r\n                <div class=\"item\" v-for=\"(item, index) of payMethod\" :key=\"index\">\r\n                    <div class=\"left\">\r\n                        <img class=\"icon\" :src=\"icons[index]\" />\r\n                        <div class=\"title\">{{ item.name }}</div>\r\n                        <div class=\"text\" v-if=\"index == 0\">\r\n                            (&nbsp;<span>${{ money ? priceFormat(money) : '0.00' }}</span>&nbsp;)\r\n                        </div>\r\n                        <div class=\"not_open\" v-else>\r\n                            ({{ item.balance }})\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"right\">\r\n                        <img src=\"@/assets/image/public/gou.png\" v-if=\"item.selected\" />\r\n                        <span v-else></span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"bottom-wrap\">\r\n            <div class=\"fixed-wrap\">\r\n                <div class=\"left\">\r\n                    {{ $t(\"总计\") }}：\r\n                    <span>${{ total }}</span>\r\n                </div>\r\n                <div class=\"right\" @click=\"handlePay\">{{ $t(\"支付\") }}</div>\r\n            </div>\r\n        </div>\r\n        <!-- 密码弹窗 -->\r\n        <van-popup v-model=\"pwtStatus\" position=\"bottom\">\r\n            <enter-Password :isPasswordShow=\"pwtStatus\" @close=\"pwtStatus = false\"\r\n                @getPassword=\"getPassword\"></enter-Password>\r\n        </van-popup>\r\n    </div>\r\n</template>\r\n<script>\r\nimport EnterPassword from \"@/components/EnterPassword/index.vue\";\r\nimport { NavBar, Popup } from \"vant\";\r\nimport { huoquyue_post, shifoushzhi_zijinmima_post } from \"@/API/user\";\r\nimport { orderPay } from \"@/API/commodity\";\r\nimport { priceFormat } from '@/utils/utis'\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            money: 0,\r\n            pwtStatus: false,\r\n            orderList: [],\r\n            total: 0,\r\n            payMethod: [\r\n                { name: this.$t('余额'), balance: '', selected: true },\r\n                { name: 'PayPal', balance: this.$t('您所在的地区尚未开放'), selected: false },\r\n                { name: 'Visa', balance: this.$t('您所在的地区尚未开放'), selected: false },\r\n                { name: 'Mastercard', balance: this.$t('您所在的地区尚未开放'), selected: false },\r\n            ],\r\n            icons: [\r\n                require('@/assets/image/public/qianbao.png'),\r\n                require('@/assets/image/public/pay.png'),\r\n                require('@/assets/image/public/visa.png'),\r\n                require('@/assets/image/public/master.png'),\r\n            ],\r\n            priceFormat\r\n        };\r\n    },\r\n    components: {\r\n        [NavBar.name]: NavBar,\r\n        [Popup.name]: Popup,\r\n        [EnterPassword.name]: EnterPassword,\r\n    },\r\n    mounted() {\r\n        this.getMoneyInfo();\r\n        this.orderList = JSON.parse(this.$route.query.orderList);\r\n        this.total = this.$route.query.total;\r\n        localStorage.removeItem(\"cartList\");\r\n        //   localStorage.removeItem(\"productList\");\r\n        // console.log(\r\n        //   \" 比较->\",\r\n        //   this.RemoveSameItem(\r\n        //     this.$ls.get(\"cartList\"),\r\n        //     this.orderList,\r\n        //     \"checkedAll\"\r\n        //   )\r\n        // );\r\n    },\r\n    created() { },\r\n    methods: {\r\n        // RemoveSameItem(listOne, listTwo, key) {\r\n        //   let newList = [];\r\n        //   loop: for (let itemOne of listOne) {\r\n        //     for (let itemTwo of listTwo) {\r\n        //       if (itemOne[key] == itemTwo[key]) {\r\n        //         continue loop;\r\n        //       }\r\n        //     }\r\n        //     newList.push(itemOne);\r\n        //   }\r\n        //   return newList.concat(listTwo);\r\n        // },\r\n        clear() {\r\n            // const list=[]\r\n            // this.$ls.get(\"cartList\") = list;\r\n        },\r\n        onClickLeft() {\r\n            history.go(-2);\r\n        },\r\n        //获取资金密码\r\n        getMoneyInfo() {\r\n            huoquyue_post().then((res) => {\r\n                this.money = res.money;\r\n            });\r\n        },\r\n        //pay\r\n        handlePay() {\r\n            shifoushzhi_zijinmima_post({}).then((res) => {\r\n                if (res.safeword == 1) {\r\n                    this.pwtStatus = true;\r\n                } else {\r\n                    this.$router.push({ path: \"/FundPasswordSettings\" });\r\n                }\r\n            });\r\n        },\r\n        //输入完密码\r\n        getPassword(value) {\r\n            let data = {\r\n                safeword: value.substring(0, 6),\r\n                orderId: \"\",\r\n            };\r\n            this.orderList.forEach((item) => {\r\n                data.orderId += item.orderId + \",\";\r\n            });\r\n            let productList = this.$ls.get(\"productList\") || [];\r\n            const ids = this.$route.query.ids || []\r\n            // 购物车多个物品时\r\n            // 我也不知道为啥循环一次删不完  就多循环两次...\r\n            productList.forEach((item, index) => {\r\n                if (ids?.includes(item.id)) {\r\n                    productList.splice(index, 1)\r\n                }\r\n            })\r\n            // 我也不知道为啥循环一次删不完  就多循环两次...\r\n            productList.forEach((item, index) => {\r\n                if (ids?.includes(item.id)) {\r\n                    productList.splice(index, 1)\r\n                }\r\n            })\r\n            // 我也不知道为啥循环一次删不完  就多循环两次...\r\n            productList.forEach((item, index) => {\r\n                if (ids?.includes(item.id)) {\r\n                    productList.splice(index, 1)\r\n                }\r\n            })\r\n            orderPay(data).then(() => {\r\n                // 如果购物车物品跟单独购买的商品一样时会把购物车那个商品清了, \r\n                // 如果不需要这个判断isCart=0是单独购买 isCart=1是购物车点进来的购买\r\n                this.$ls.set(\"productList\", productList)\r\n                this.$router.push({\r\n                    path: \"/SuccessfulOperation\",\r\n                    query: { orderId: data.orderId, isCart: this.$route.query?.isCart || 0 },\r\n                });\r\n            });\r\n        },\r\n    },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.PendingPayment {\r\n    font-size: 14px;\r\n    background: #eef2f6;\r\n    height: 100%;\r\n\r\n    .pay-header {\r\n        height: 220px;\r\n        background: url(\"@/assets/image/me/bg2.png\") no-repeat center;\r\n        background-size: 100% 100%;\r\n        padding: 0 15px;\r\n\r\n        .title {\r\n            font-size: 16px;\r\n            color: #ffffff;\r\n            font-weight: 500;\r\n            padding-top: 100px;\r\n        }\r\n\r\n        .text {\r\n            color: #ffffff;\r\n            font-size: 12px;\r\n            padding-top: 10px;\r\n        }\r\n\r\n    }\r\n\r\n    .pay-list {\r\n        margin: 0 15px;\r\n        background: #fff;\r\n        margin-top: -40px;\r\n        padding: 0 10px;\r\n\r\n        .header-title {\r\n            height: 60px;\r\n            line-height: 60px;\r\n            border-bottom: 1px solid #eeeeee;\r\n            color: #000000;\r\n        }\r\n\r\n        .list {\r\n            .item {\r\n                display: flex;\r\n                align-items: center;\r\n                border-bottom: 1px solid #eeeeee;\r\n                padding: 15px 0;\r\n                &:nth-child(1) {\r\n                    .icon {\r\n                        width: 16px;\r\n                        height: 16px;\r\n                    }\r\n                }\r\n                &:nth-child(2) {\r\n                    .icon {\r\n                        width: 13px;\r\n                        height: 16px;\r\n                    }\r\n                }\r\n                &:nth-child(3) {\r\n                    .icon {\r\n                        width: 18px;\r\n                        height: 16px;\r\n                    }\r\n                }\r\n                &:nth-child(4) {\r\n                    .icon {\r\n                        width: 18px;\r\n                        height: 10px;\r\n                    }\r\n                }\r\n                .left {\r\n                    flex: 1;\r\n                    display: flex;\r\n                    align-items: center;\r\n\r\n                    img {\r\n                        width: 22px;\r\n                        display: block;\r\n                    }\r\n\r\n                   \r\n\r\n                    .title {\r\n                        font-size: 16px;\r\n                        margin: 0 10px;\r\n                    }\r\n\r\n                    .text {\r\n                        font-weight: 500;\r\n                        \r\n                        color: var(--main-color);\r\n                        font-size: 16px;\r\n                    }\r\n\r\n                    .not_open {\r\n                        font-size: 12px;\r\n                        color: #999;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        .right {\r\n            span {\r\n                display: block;\r\n                width: 14px;\r\n                height: 14px;\r\n                background: #d9d9d9;\r\n                border-radius: 50%;\r\n            }\r\n\r\n            img {\r\n                width: 14px;\r\n                height: 14px;\r\n            }\r\n        }\r\n    }\r\n\r\n    .bottom-wrap {\r\n        background: #ffffff;\r\n        height: 53px;\r\n        position: fixed;\r\n        bottom: 0;\r\n        left: 0;\r\n        width: 100%;\r\n\r\n        .fixed-wrap {\r\n            margin: 0 15px;\r\n            display: flex;\r\n            align-items: center;\r\n            margin-top: 6px;\r\n\r\n            .left {\r\n                flex: 1;\r\n                font-size: 16px;\r\n\r\n                span {\r\n                    \r\n                    color: var(--main-color);\r\n                    font-weight: 500;\r\n                }\r\n            }\r\n\r\n            .right {\r\n                width: 108px;\r\n                height: 40px;\r\n                background: var(--main-color);\r\n                color: #fff;\r\n                font-size: 16px;\r\n                text-align: center;\r\n                line-height: 40px;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/deep/ .van-nav-bar {\r\n    background: transparent;\r\n}\r\n\r\n/deep/ .van-nav-bar .van-icon {\r\n    color: #fff;\r\n}\r\n\r\n.van-hairline--bottom::after {\r\n    border-bottom-width: 0px;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}