{"ast":null,"code":"import \"vant/es/empty/style\";\nimport _Empty from \"vant/es/empty\";\nimport \"core-js/modules/es.array.push.js\";\nimport { apiLoanMy, apiLoanMyRecord, apiCheckAvailability } from '@/API/loan';\nimport { getStorage, priceFormat } from '@/utils/utis';\nimport Footer from '@/components/Footer';\nexport default {\n  components: {\n    Footer,\n    [_Empty.name]: _Empty\n  },\n  data() {\n    return {\n      priceFormat,\n      cardList: [{\n        title: this.$t('已贷款'),\n        value: 0\n      }, {\n        title: this.$t('产生利息'),\n        value: '--'\n      }, {\n        title: this.$t('预计还款'),\n        value: '--'\n      }],\n      isEn: getStorage('lang') !== 'cn' || getStorage('lang') !== 'tw',\n      pageNo: 1,\n      loanHistory: [],\n      applyAmount: '--',\n      isCheckAvailability: 'false'\n    };\n  },\n  mounted() {\n    this.requireMyLoan();\n    this.requireMyLoanRecord();\n    this.requireCheckAvailability();\n  },\n  methods: {\n    async requireMyLoan() {\n      const res = await apiLoanMy();\n      this.cardList[0].value = res.alreadyCreditDays;\n      this.cardList[1].value = this.priceFormat(res.interest) || '--';\n      this.cardList[2].value = this.priceFormat(res.estimatePayment) || '--';\n      this.applyAmount = this.priceFormat(res.applyAmount) || '--';\n    },\n    async requireMyLoanRecord() {\n      const res = await apiLoanMyRecord({\n        pageNo: this.pageNo\n      });\n      this.loanHistory = res.elements;\n    },\n    // 还款按钮\n    handleRepayment(status, id) {\n      if (status == 2 || status == 3) this.$router.push('/repayment/expected?creditId=' + id);\n      if (status == 4 || status == 5) this.$router.push('/loan/apply?creditId=' + id);\n    },\n    async requireCheckAvailability() {\n      this.isCheckAvailability = await apiCheckAvailability();\n    }\n  }\n};","map":{"version":3,"names":["apiLoanMy","apiLoanMyRecord","apiCheckAvailability","getStorage","priceFormat","Footer","components","_Empty","name","data","cardList","title","$t","value","isEn","pageNo","loanHistory","applyAmount","isCheckAvailability","mounted","requireMyLoan","requireMyLoanRecord","requireCheckAvailability","methods","res","alreadyCreditDays","interest","estimatePayment","elements","handleRepayment","status","id","$router","push"],"sources":["src/page/loanMy/index.vue"],"sourcesContent":["<template>\r\n    <div class=\"my_loan\">\r\n        <van-nav-bar safe-area-inset-top :title=\"$t('我的贷款')\" left-arrow @click-left=\"$router.go(-1)\" fixed ref=\"header\">\r\n        </van-nav-bar>\r\n        <!-- 上方我的贷款 -->\r\n        <div :class=\"['top_card', isEn && 'en_card']\">\r\n            <div class=\"tt\">\r\n                <div class=\"tl\">\r\n                    <span>{{ $t('我的贷款') }}</span>\r\n                    <span>{{ applyAmount }}</span>\r\n                </div>\r\n                <!-- <div :class=\"['tr', isEn && 'en_tr']\">\r\n                    <span>{{ $t('申请贷款') }}</span>\r\n                </div> -->\r\n            </div>\r\n            <div class=\"tb\">\r\n                <div class=\"item\" v-for=\"(item, index) of cardList\" :key=\"index\"\r\n                    :class=\"isEn && index != 0 && 'en_item'\">\r\n                    <span>\r\n                        {{ item.value }}\r\n                        <em>{{ index == 0 ? $t('天') : '' }}</em>\r\n                    </span>\r\n                    <span>{{ item.title }}</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- 贷款记录 -->\r\n        <div class=\"loan_history\">\r\n            <div class=\"title\">{{ $t('贷款记录') }}</div>\r\n            <ul>\r\n                <li v-for=\"(item, index) of loanHistory\" :key=\"index\" :class=\"isEn && 'en_li'\">\r\n                    <img src=\"@/assets/image/locn/icon.png\" alt=\"\">\r\n                    <div class=\"content\">\r\n                        <div class=\"top\">\r\n                            <div class=\"tleft\">\r\n                                <span>{{ priceFormat(item.applyAmount) }}</span>\r\n                                <span>{{ $t('申请日期') }}: {{ $formatZoneDate(item.customerSubmitTime) }}</span>\r\n                            </div>\r\n                            <div class=\"btn\" @click=\"handleRepayment(item.status, item.id)\" v-if=\"item.status != 1 && item.status != 5\">\r\n                                <button v-if=\"item.status == 2 || item.status == 3\">{{ $t('还款') }}</button>\r\n                                <button v-else-if=\"item.status == 4\">\r\n                                    {{ $t('重新申请') }}\r\n                                    <!-- :disabled=\"isCheckAvailability == 'false'\"\r\n                                    :class=\"isCheckAvailability == 'false' && 'disabled'\" -->\r\n                                </button>\r\n                            </div>\r\n                            <div class=\"null\" v-else>--</div>\r\n                        </div>\r\n                        <div class=\"btm\">\r\n                            <span>\r\n                                {{ $t('还款周期') }}:\r\n                                {{ item.creditPeriod }}<em>{{ $t('天') }}</em>\r\n                            </span>\r\n                            <span>{{ $t('固定利率') }}: {{ Math.floor(item.creditRate * 100) + '%' }}</span>\r\n                            <!-- <span v-if=\"item.status == 1\">{{ $t('借款成功') }}</span> -->\r\n                            <span v-if=\"item.status == 1\" style=\"color: var(--main-color);\">{{ $t('申请中') }}</span>\r\n                            <span v-if=\"item.status == 2\" style=\"color: #2FAA59;\">{{ $t('借款成功') }}</span>\r\n                            <span v-if=\"item.status == 3\" style=\"color: #E43434;\">{{ $t('已逾期') }}</span>\r\n                            <span v-if=\"item.status == 4\" style=\"color: #E43434;\">{{ $t('借款失败') }}</span>\r\n                            <span v-if=\"item.status == 5\" style=\"color: #EB9D38;\">{{ $t('已节清') }}</span>\r\n                        </div>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n            <van-empty v-if=\"!loanHistory.length\" :description=\"$t('暂无数据')\" />\r\n        </div>\r\n        <Footer />\r\n    </div>\r\n</template>\r\n<script>\r\nimport { Empty } from 'vant'\r\nimport { apiLoanMy, apiLoanMyRecord, apiCheckAvailability } from '@/API/loan'\r\nimport { getStorage, priceFormat } from '@/utils/utis'\r\nimport Footer from '@/components/Footer'\r\nexport default {\r\n    components: { \r\n        Footer,\r\n        [Empty.name]: Empty\r\n     },\r\n    data() {\r\n        return {\r\n            priceFormat,\r\n            cardList: [\r\n                { title: this.$t('已贷款'), value: 0 },\r\n                { title: this.$t('产生利息'), value: '--' },\r\n                { title: this.$t('预计还款'), value: '--' },\r\n            ],\r\n            isEn: getStorage('lang') !== 'cn' || getStorage('lang') !== 'tw',\r\n            pageNo: 1,\r\n            loanHistory: [],\r\n            applyAmount: '--',\r\n            isCheckAvailability: 'false'\r\n        }\r\n    },\r\n    mounted() {\r\n        this.requireMyLoan()\r\n        this.requireMyLoanRecord()\r\n        this.requireCheckAvailability()\r\n    },\r\n    methods: {\r\n        async requireMyLoan() {\r\n            const res = await apiLoanMy()\r\n            this.cardList[0].value = res.alreadyCreditDays\r\n            this.cardList[1].value = this.priceFormat(res.interest) || '--'\r\n            this.cardList[2].value = this.priceFormat(res.estimatePayment) || '--'\r\n            this.applyAmount = this.priceFormat(res.applyAmount) || '--'\r\n        },\r\n        async requireMyLoanRecord() {\r\n            const res = await apiLoanMyRecord({ pageNo: this.pageNo })\r\n            this.loanHistory = res.elements\r\n        },\r\n        // 还款按钮\r\n        handleRepayment(status, id) {\r\n            if (status == 2 || status == 3) this.$router.push('/repayment/expected?creditId=' + id)\r\n            if (status == 4 || status == 5) this.$router.push('/loan/apply?creditId=' + id)\r\n        },\r\n        async requireCheckAvailability() {\r\n            this.isCheckAvailability = await apiCheckAvailability()\r\n        },\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.my_loan {\r\n    width: 100%;\r\n    min-height: 100vh;\r\n    background: #F3F5F9;\r\n    padding-top: 44px;\r\n    font-size: 14px;\r\n    // padding-bottom: 80px;\r\n\r\n    .top_card {\r\n        width: 345px;\r\n        height: 160px;\r\n        background: #fff;\r\n        margin: 11px auto;\r\n        border-radius: 4px;\r\n        padding: 15px;\r\n        box-sizing: border-box;\r\n\r\n        &.en_card {\r\n            height: 170px;\r\n        }\r\n\r\n        .tt {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: center;\r\n\r\n            .tl {\r\n                display: flex;\r\n                flex-direction: column;\r\n                width: 100%;\r\n                justify-content: center;\r\n                align-items: center;\r\n\r\n                span {\r\n                    &:nth-child(1) {\r\n                        font-weight: 600;\r\n                        font-size: 16px;\r\n\r\n                    }\r\n\r\n                    &:nth-child(2) {\r\n                        margin-top: 10px;\r\n                        font-weight: 600;\r\n                        font-size: 20px;\r\n                        color: var(--main-color);\r\n                    }\r\n                }\r\n            }\r\n\r\n            .tr {\r\n                width: 109px;\r\n                height: 34px;\r\n                background: var(--main-color);\r\n                border-radius: 4px;\r\n                display: flex;\r\n                justify-content: center;\r\n                align-items: center;\r\n                color: #fff;\r\n                font-weight: 500;\r\n                font-size: 14px;\r\n\r\n                &.en_tr {\r\n                    width: 115px;\r\n                    height: 36px;\r\n                }\r\n            }\r\n        }\r\n\r\n        .tb {\r\n            margin-top: 22px;\r\n            padding: 0 20px;\r\n            width: 100%;\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: center;\r\n            box-sizing: border-box;\r\n\r\n            .item {\r\n                display: flex;\r\n                flex-direction: column;\r\n                // justify-content: center;\r\n                // align-items: center;\r\n                flex: 0 0 33%;\r\n                text-align: center;\r\n\r\n                &:nth-child(1) {\r\n                    transform: translateX(-15px);\r\n                }\r\n\r\n                &:nth-child(3) {\r\n                    transform: translateX(15px);\r\n                }\r\n\r\n                &.en_item {\r\n\r\n                    &:nth-child(3) {\r\n                        transform: translate(15px, 7.5px);\r\n                    }\r\n\r\n                    &:nth-child(2) {\r\n                        transform: translate(0, 7.5px);\r\n                    }\r\n                }\r\n\r\n                span {\r\n                    em {\r\n                        font-size: 14px;\r\n                        font-style: normal;\r\n                    }\r\n\r\n                    &:nth-child(1) {\r\n                        font-weight: 600;\r\n                        font-size: 18px;\r\n                        color: var(--main-color);\r\n                    }\r\n\r\n                    &:nth-child(2) {\r\n                        margin-top: 6px;\r\n                        font-weight: 400;\r\n                        font-size: 12px;\r\n                        color: #999999;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    .loan_history {\r\n        margin-top: 19px;\r\n        padding: 0 14px 0 16px;\r\n        min-height: 55vh;\r\n\r\n        .title {\r\n            margin-bottom: 11px;\r\n            color: #333;\r\n            font-size: 12px;\r\n        }\r\n\r\n        ul {\r\n            width: 100%;\r\n\r\n            li {\r\n                width: 100%;\r\n                height: 87px;\r\n                border-radius: 4px;\r\n                background: #fff;\r\n                margin-bottom: 12px;\r\n                display: flex;\r\n                justify-content: center;\r\n                align-items: center;\r\n                padding: 0 16px 0 15px;\r\n                box-sizing: border-box;\r\n\r\n                &.en_li {\r\n                    position: relative;\r\n                    height: 115px;\r\n\r\n                    img {\r\n                        transform: translateY(-20px);\r\n                    }\r\n\r\n                    .content {\r\n                        display: flex;\r\n                        flex-direction: column;\r\n\r\n                        .top {\r\n                            flex: 0 0 50%;\r\n                            display: flex;\r\n\r\n                            .tleft {\r\n                                span {\r\n                                    &:nth-child(2) {\r\n                                        transform: scale(.77) translateX(-28px);\r\n                                    }\r\n                                }\r\n                            }\r\n                            \r\n                            .btn {\r\n                                position: absolute;\r\n                                top: 11px;\r\n                                right: 0;\r\n                                padding: 0 5px;\r\n                                min-width: 70px;\r\n                                min-height: 29px;\r\n                                font-size: 10px;\r\n                                border-radius: 4px 0 0 4px;\r\n\r\n                                span {\r\n                                    transform: scale(.9);\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        .btm {\r\n                            flex: 0 0 50%;\r\n                            display: flex;\r\n                            flex-direction: column;\r\n                            position: relative;\r\n\r\n                            span {\r\n                                &:nth-child(1) {\r\n                                    transform: none;\r\n                                    font-size: 10px;\r\n                                    margin-bottom: 4px;\r\n                                    transform: translateX(-26px) scale(0.8);\r\n                                    em {\r\n                                        margin-left: 2px;\r\n                                        font-size: 10px;\r\n                                    }\r\n                                }\r\n\r\n                                &:nth-child(2) {\r\n                                    transform: none;\r\n                                    font-size: 10px;\r\n                                    margin: 0;\r\n                                    transform: translateX(-26px) scale(0.8);\r\n                                }\r\n\r\n                                &:nth-child(3) {\r\n                                    position: absolute;\r\n                                    top: 50%;\r\n                                    right: 7px;\r\n                                    transform: translateY(-50%) scale(0.8);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                img {\r\n                    flex: 0 0 30px;\r\n                    width: 30px;\r\n                    height: 30px;\r\n                    margin-right: 10px;\r\n                    transform: translateY(-14px);\r\n                }\r\n\r\n                .content {\r\n                    flex: 1;\r\n                    width: 100%;\r\n\r\n                    .top {\r\n                        display: flex;\r\n                        justify-content: space-between;\r\n                        align-items: center;\r\n                        padding-bottom: 8px;\r\n                        border-bottom: 1px solid #F3F3F3;\r\n\r\n                        .tleft {\r\n                            display: flex;\r\n                            flex-direction: column;\r\n\r\n                            span {\r\n                                &:nth-child(1) {\r\n                                    color: #333;\r\n                                    font-size: 16px;\r\n                                    font-weight: 700;\r\n                                    line-height: 19px;\r\n                                }\r\n\r\n                                &:nth-child(2) {\r\n                                    margin-top: 1px;\r\n                                    color: #999;\r\n                                    font-weight: 500;\r\n                                    font-size: 12px;\r\n                                    text-align: start;\r\n                                    transform: scale(.85) translateX(-15px);\r\n                                }\r\n                            }\r\n                        }\r\n                        .null {\r\n                            width: 83px;\r\n                            height: 24px;\r\n                            display: flex;\r\n                            justify-content: center;\r\n                            align-items: center;\r\n                        }\r\n\r\n                        .btn {\r\n                            width: 83px;\r\n                            height: 24px;\r\n                            background: var(--main-color);\r\n                            border-radius: 4px;\r\n                            display: flex;\r\n                            justify-content: center;\r\n                            align-items: center;\r\n                            color: #fff;\r\n                            font-weight: 500;\r\n                            font-size: 13px;\r\n                            // border: 1px solid var(--main-color);\r\n\r\n                            button {\r\n                                width: 83px;\r\n                                height: 24px;\r\n                                background: transparent;\r\n                                border: none;\r\n                                border-radius: 4px;\r\n                                font-weight: 400;\r\n                                &.disabled {\r\n                                    // opacity: .6;\r\n                                    background: #EDEDED;\r\n                                    color: #AEAEAE;\r\n                                    \r\n                                }\r\n                            }\r\n\r\n                            &.again {\r\n                                background: linear-gradient(0deg, #FFF7EC, #FFF7EC), #EEEEEE;\r\n                                color: var(--main-color);\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    .btm {\r\n                        margin-top: 6px;\r\n\r\n                        span {\r\n                            color: #999;\r\n                            font-size: 10px;\r\n                            line-height: 14px;\r\n                            transform: scale(.85) translateX(-5px);\r\n                            display: inline-block;\r\n\r\n                            // &:nth-child(2) {\r\n                            //     margin: 0 30px 0 15px;\r\n                            // }\r\n\r\n                            &:last-child {\r\n                                color: #3F80FF;\r\n                                font-size: 12px;\r\n                                transform: scale(1);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>"],"mappings":";;;AAuEA,SAAAA,SAAA,EAAAC,eAAA,EAAAC,oBAAA;AACA,SAAAC,UAAA,EAAAC,WAAA;AACA,OAAAC,MAAA;AACA;EACAC,UAAA;IACAD,MAAA;IACA,CAAAE,MAAA,CAAAC,IAAA,GAAAD;EACA;EACAE,KAAA;IACA;MACAL,WAAA;MACAM,QAAA,GACA;QAAAC,KAAA,OAAAC,EAAA;QAAAC,KAAA;MAAA,GACA;QAAAF,KAAA,OAAAC,EAAA;QAAAC,KAAA;MAAA,GACA;QAAAF,KAAA,OAAAC,EAAA;QAAAC,KAAA;MAAA,EACA;MACAC,IAAA,EAAAX,UAAA,qBAAAA,UAAA;MACAY,MAAA;MACAC,WAAA;MACAC,WAAA;MACAC,mBAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,aAAA;IACA,KAAAC,mBAAA;IACA,KAAAC,wBAAA;EACA;EACAC,OAAA;IACA,MAAAH,cAAA;MACA,MAAAI,GAAA,SAAAxB,SAAA;MACA,KAAAU,QAAA,IAAAG,KAAA,GAAAW,GAAA,CAAAC,iBAAA;MACA,KAAAf,QAAA,IAAAG,KAAA,QAAAT,WAAA,CAAAoB,GAAA,CAAAE,QAAA;MACA,KAAAhB,QAAA,IAAAG,KAAA,QAAAT,WAAA,CAAAoB,GAAA,CAAAG,eAAA;MACA,KAAAV,WAAA,QAAAb,WAAA,CAAAoB,GAAA,CAAAP,WAAA;IACA;IACA,MAAAI,oBAAA;MACA,MAAAG,GAAA,SAAAvB,eAAA;QAAAc,MAAA,OAAAA;MAAA;MACA,KAAAC,WAAA,GAAAQ,GAAA,CAAAI,QAAA;IACA;IACA;IACAC,gBAAAC,MAAA,EAAAC,EAAA;MACA,IAAAD,MAAA,SAAAA,MAAA,YAAAE,OAAA,CAAAC,IAAA,mCAAAF,EAAA;MACA,IAAAD,MAAA,SAAAA,MAAA,YAAAE,OAAA,CAAAC,IAAA,2BAAAF,EAAA;IACA;IACA,MAAAT,yBAAA;MACA,KAAAJ,mBAAA,SAAAhB,oBAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}