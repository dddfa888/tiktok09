{"ast":null,"code":"import \"vant/es/toast/style\";\nimport _Toast from \"vant/es/toast\";\nimport \"vant/es/popup/style\";\nimport _popup from \"vant/es/popup\";\nimport \"vant/es/picker/style\";\nimport _Picker from \"vant/es/picker\";\nimport \"vant/es/switch/style\";\nimport _Switch from \"vant/es/switch\";\nimport \"vant/es/nav-bar/style\";\nimport _NavBar from \"vant/es/nav-bar\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport { dizhi_liebiao_post, dizhi_xinzeng_post, dizhi_xiugai_post } from \"@/API/user\";\nimport NationalityList from \"@/components/NationalityList\";\nimport { apiListCountry, apiListState, apiListCity } from \"@/API/common\";\nimport de from \"@/i18n/de\";\nexport default {\n  data() {\n    return {\n      triangleDown: require(\"@/assets/image/me/triangle_down.png\"),\n      pageDiaCode: false,\n      dialCode: localStorage.getItem(\"dialCode\") || 1,\n      checked: true,\n      showCountryPicker: false,\n      showCityPicker: false,\n      showProvincePicker: false,\n      formData: {\n        contacts: \"\",\n        email: \"\",\n        phone: \"\",\n        country: \"\",\n        province: \"\",\n        city: \"\",\n        postcode: \"\",\n        address: \"\",\n        countryId: 0,\n        provinceId: 0,\n        cityId: 0\n      },\n      currentId: null,\n      cityList: [],\n      provinceList: [],\n      countryList: [],\n      countryId: 0,\n      provinceId: 0,\n      isProvince: true,\n      isCity: true,\n      currentCountryId: null\n    };\n  },\n  components: {\n    [_NavBar.name]: _NavBar,\n    [_Switch.name]: _Switch,\n    NationalityList,\n    [_Picker.name]: _Picker,\n    [_popup.name]: _popup\n  },\n  created() {\n    const {\n      id\n    } = this.$route.query;\n    if (id) {\n      this.currentId = id;\n      this.getAddressInfo();\n    }\n    this.getCountry();\n  },\n  methods: {\n    // 获取国家\n    async getCountry() {\n      const result = await apiListCountry();\n      this.countryList = result.data;\n    },\n    // 获取省/州\n    async getStateList(id) {\n      console.log(`id ::->`, id);\n      const res = await apiListState({\n        countryId: +id\n      });\n      this.provinceList = res.data;\n      if (this.provinceList.length == 0) {\n        this.isProvince = false;\n        this.provinceList = [{\n          stateName: this.$t(\"暂无数据\"),\n          id: \"\"\n        }];\n      }\n    },\n    // 获取市\n    async getListCity(id) {\n      console.log(`id ::->`, id);\n      const res = await apiListCity({\n        stateId: id\n      });\n      this.cityList = res.data;\n      if (this.cityList.length == 0) {\n        this.isCity = false;\n        this.cityList = [{\n          cityName: this.$t(\"暂无数据\"),\n          id: \"\"\n        }];\n      } else {\n        this.isCity = true;\n      }\n    },\n    // 城市change\n    onCityChange(value) {\n      this.cityList.find(item => {\n        if (item.cityName == value) {\n          this.formData.cityId = item.id;\n        }\n      });\n      this.formData.city = value;\n    },\n    // onCityConfirm(value) {\n    //     this.formData.city = value.cityName;\n    //     this.showCityPicker = false;\n    // },\n    onCityCancel() {\n      this.showCityPicker = false;\n    },\n    // 选择国家\n    // onCountryConfirm(value) {\n    //     this.formData.country = value.countryName;\n    //     this.countryId = value.id;\n    //     this.isProvince = true;\n    //     this.isCity = true;\n    //     this.showCountryPicker = false;\n    //     this.currentCountryId = value.id;\n    //     // 查看有没有省\n    //     this.getStateList(value.id);\n    // },\n    onCountryChange(value) {\n      this.countryList.find(item => {\n        if (item.countryName == value) {\n          this.formData.country = value;\n          this.formData.countryId = item.id;\n          this.currentCountryId = this.countryId = item.id;\n          this.isProvince = true;\n          this.showCountryPicker = false;\n          this.getStateList(item.id);\n        }\n      });\n      this.formData.city = this.formData.province = \"\";\n      this.formData.cityId = this.formData.provinceId = 0;\n      // this.formData.country = value.countryName;\n      // this.countryId = value.id;\n      // this.isProvince = true;\n      // this.isCity = true;\n      // this.showCountryPicker = false;\n      // this.currentCountryId = value.id;\n      // // 查看有没有省\n      // this.getStateList(value.id);\n    },\n    onCountryCancel() {\n      this.showCountryPicker = false;\n    },\n    // onProvinceConfirm(value) {\n    //     this.formData.province = value.stateName;\n    //     this.provinceId = value.id;\n    //     this.showProvincePicker = false;\n    //     this.getListCity(value.id);\n    // },\n    onProvinceChange(value) {\n      this.provinceList.find(item => {\n        if (item.stateName == value) {\n          this.formData.province = value;\n          this.formData.provinceId = item.id;\n          this.provinceId = item.id;\n          this.showProvincePicker = false;\n          this.getListCity(item.id);\n        }\n      });\n      this.formData.city = '';\n    },\n    onProvinceCancel() {\n      this.showProvincePicker = false;\n    },\n    clickCountry() {\n      document.activeElement.blur();\n      this.showCountryPicker = true;\n      this.formData.province = \"\";\n      this.formData.city = \"\";\n    },\n    ProvincePicker() {\n      document.activeElement.blur();\n      this.formData.city = \"\";\n      // 选择省\n      if (this.formData.country == \"\") {\n        _Toast(this.$t(\"请输入\") + this.$t(\"国家\"));\n      } else {\n        this.getStateList(this.countryId);\n        this.showProvincePicker = true;\n      }\n    },\n    CityPicker() {\n      document.activeElement.blur();\n      if (this.formData.province == this.$t(\"暂无数据\")) {\n        this.formData.city = this.$t(\"暂无数据\");\n        // this.city\n      } else if (this.formData.country && this.formData.province) {\n        this.getListCity(this.provinceId);\n        this.showCityPicker = true;\n      } else {\n        _Toast(this.$t(\"请输入\") + this.$t(\"省区\"));\n      }\n    },\n    getAddressInfo() {\n      _Toast.loading({\n        duration: 0,\n        // message: this.$t(\"请求中\"),\n        forbidClick: true\n      });\n      dizhi_liebiao_post({}).then(res => {\n        _Toast.clear();\n        const {\n          pageList\n        } = res;\n        const address = pageList.find(item => String(item.id) === String(this.currentId));\n        if (address) {\n          this.checked = Boolean(address.use);\n          this.currentCountryId = address?.countryId;\n          if (address.phone.indexOf(\"|\") > -1) {\n            const arr = address.phone.split(\"|\");\n            this.dialCode = arr[0];\n            address.phone = arr[1];\n          }\n          delete address.use;\n          address?.countryId && this.getStateList(address.countryId);\n          address?.provinceId && this.getListCity(address.provinceId);\n          this.formData = {\n            ...address\n          };\n        }\n      }).catch(err => {\n        // Toast.fail(err.msg);\n      });\n    },\n    onClickLeft() {\n      this.$router.go(-1);\n    },\n    // 禁止input框输入表情\n    inputVal(type, e) {\n      let reg = /([0-9|*|#]\\uFE0F\\u20E3)|([0-9|#]\\u20E3)|([\\u203C-\\u3299]\\uFE0F\\u200D)|([\\u203C-\\u3299]\\uFE0F)|([\\u2122-\\u2B55])|(\\u303D)|([(\\A9)|(\\AE)]\\u3030)|(\\uA9)|(\\uAE)|(\\u3030)|([\\uD83C|\\uD83D|\\uD83E][\\uDC00-\\uDFFF])|([\\uD83C|\\uD83D|\\uD83E][\\uDC00-\\uDFFF][\\u200D|\\uFE0F])/g;\n      setTimeout(() => {\n        this.formData[type] = e.replace(reg, \"\");\n      }, 0);\n    },\n    getName(params) {\n      if (!this.pageDiaCode) {\n        this.pageDiaCode = true;\n      } else {\n        this.dialCode = params[2];\n        localStorage.setItem(\"dialCode\", this.dialCode);\n      }\n    },\n    openNational() {\n      this.$refs.controlChild.open();\n    },\n    handleInputChange(e) {\n      // 限制input只能输入数字\n      if (/^[1-9]\\d*$|^$/.test(e)) {\n        this.formData.phone = e;\n      }\n    },\n    submitHandle() {\n      if (this.formData.contacts === \"\") {\n        _Toast(this.$t(\"请输入\") + this.$t(\"名称\"));\n        return;\n      }\n      if (this.formData.email === \"\") {\n        _Toast(this.$t(\"请输入\") + this.$t(\"邮箱\"));\n        return;\n      } else {\n        const reg = /^([A-Za-z0-9_\\-\\.\\w{3,}])+\\@([A-Za-z0-9_\\-\\.])+\\.([A-Za-z]{2,4})$/;\n        if (!reg.test(this.formData.email)) {\n          _Toast(this.$t(\"邮箱格式有误\"));\n          return;\n        }\n      }\n      if (this.formData.phone === \"\") {\n        _Toast(this.$t(\"请输入\") + this.$t(\"手机号\"));\n        return;\n      } else {\n        const reg = /^[0-9]+[0-9]*$/;\n        if (!reg.test(this.formData.phone)) {\n          _Toast(this.$t(\"手机号格式有误\"));\n          return;\n        }\n      }\n      if (this.formData.country === \"\") {\n        _Toast(this.$t(\"请输入\") + this.$t(\"国家\"));\n        return;\n      }\n      // if (this.formData.province === \"\") {\n      //   Toast(this.$t(\"请输入\") + this.$t(\"省区\"));\n      //   return;\n      // }\n      // if (this.formData.city === \"\") {\n      //   Toast(this.$t(\"请输入\") + this.$t(\"市\"));\n      //   return;\n      // }\n      if (this.formData.postcode === \"\") {\n        // Toast(this.$t(\"请输入\") + this.$t(\"邮编\"));\n        this.$notifyWarn(this.$t(\"请输入\") + this.$t(\"邮编\"));\n        return;\n      }\n      if (this.formData.address === \"\") {\n        // Toast(this.$t(\"请输入\") + this.$t(\"收件地址\"));\n        this.$notifyWarn(this.$t(\"请输入\") + this.$t(\"收件地址\"));\n        return;\n      }\n      if (this.isProvince && this.formData.province == '') {\n        // Toast(this.$t(\"请选择\") + this.$t(\"省区\"));\n        this.$notifyWarn(this.$t(\"请选择\") + this.$t(\"省区\"));\n        return;\n      }\n      if (this.isProvince && this.isCity && this.formData.city == '') {\n        // Toast(this.$t(\"请选择\") + this.$t(\"市\"));\n        this.$notifyWarn(this.$t(\"请选择\") + this.$t(\"市\"));\n        return;\n      }\n      const params = {\n        ...this.formData,\n        countryId: this.currentCountryId,\n        phone: `${this.dialCode}|${this.formData.phone}`,\n        use: this.checked ? 1 : 0\n      };\n      params.province == '' && delete params.province;\n      params.city == '' && delete params.city;\n      let ajaxFn = dizhi_xinzeng_post;\n      if (this.currentId) {\n        params.id = this.currentId;\n        ajaxFn = dizhi_xiugai_post;\n      }\n      _Toast.loading({\n        duration: 0,\n        message: this.$t(\"提交中\"),\n        forbidClick: true\n      });\n      ajaxFn(params).then(() => {\n        _Toast.success(this.$t(\"保存成功\"));\n        setTimeout(() => {\n          this.$router.go(-1);\n        }, 500);\n      }).catch(err => {\n        _Toast.clear();\n        // Toast.fail(err.msg);\n      });\n    }\n  }\n};","map":{"version":3,"names":["dizhi_liebiao_post","dizhi_xinzeng_post","dizhi_xiugai_post","NationalityList","apiListCountry","apiListState","apiListCity","de","data","triangleDown","require","pageDiaCode","dialCode","localStorage","getItem","checked","showCountryPicker","showCityPicker","showProvincePicker","formData","contacts","email","phone","country","province","city","postcode","address","countryId","provinceId","cityId","currentId","cityList","provinceList","countryList","isProvince","isCity","currentCountryId","components","_NavBar","name","_Switch","_Picker","_popup","created","id","$route","query","getAddressInfo","getCountry","methods","result","getStateList","console","log","res","length","stateName","$t","getListCity","stateId","cityName","onCityChange","value","find","item","onCityCancel","onCountryChange","countryName","onCountryCancel","onProvinceChange","onProvinceCancel","clickCountry","document","activeElement","blur","ProvincePicker","_Toast","CityPicker","loading","duration","forbidClick","then","clear","pageList","String","Boolean","use","indexOf","arr","split","catch","err","onClickLeft","$router","go","inputVal","type","e","reg","setTimeout","replace","getName","params","setItem","openNational","$refs","controlChild","open","handleInputChange","test","submitHandle","$notifyWarn","ajaxFn","message","success"],"sources":["src/page/AddressDetails/index.vue"],"sourcesContent":["<template>\r\n    <div class=\"AddressDetails\" style=\"min-height: 100vh;\">\r\n        <nationality-list ref=\"controlChild\" :title=\"$t('选择区域码')\" @getName=\"getName(arguments)\"></nationality-list>\r\n\r\n        <van-nav-bar safe-area-inset-top fixed :title=\"$t('新增地址/修改地址')\" :right-text=\"$t('保存')\" left-arrow\r\n            @click-left=\"onClickLeft\" @click-right=\"submitHandle\" />\r\n        <div style=\"width: 100%; height: 46px\"></div>\r\n\r\n        <div class=\"form-content\">\r\n            <div class=\"item\">\r\n                <el-input :placeholder=\"$t('收货人姓名')\" v-model=\"formData.contacts\" clearable maxlength=\"64\" show-word-limit\r\n                    @input=\"inputVal('contacts', $event)\">\r\n                </el-input>\r\n            </div>\r\n            <div class=\"item\">\r\n                <el-input :placeholder=\"$t('邮箱')\" v-model.trim=\"formData.email\" clearable maxlength=\"64\" show-word-limit>\r\n                </el-input>\r\n            </div>\r\n            <div class=\"item\">\r\n                <el-input :placeholder=\"$t('手机号')\" maxlength=\"20\" :value=\"formData.phone\" @input=\"handleInputChange\">\r\n                    <div slot=\"prepend\" @click=\"openNational\">\r\n                        <p>\r\n                            +<span>{{ dialCode }}</span>\r\n                            <img :src=\"triangleDown\" alt=\"\" class=\"icon\" />\r\n                        </p>\r\n                    </div>\r\n                </el-input>\r\n            </div>\r\n            <div class=\"address_item\">\r\n                <el-select v-model=\"formData.country\" filterable :placeholder=\"$t('请选择')\" :no-data-text=\"$t('暂无数据')\"\r\n                    :no-match-text=\"$t('暂无数据')\" :loading-text=\"$t('加载中')\" @change=\"onCountryChange\">\r\n                    <el-option v-for=\"item in countryList\" :key=\"item.id\" value-key=\"countryName\" :label=\"item.label\"\r\n                        :value=\"item.countryName\">\r\n                    </el-option>\r\n                </el-select>\r\n                <el-select v-if=\"isProvince\" v-model=\"formData.province\" filterable :placeholder=\"$t('请选择')\"\r\n                    :no-data-text=\"$t('暂无数据')\" :no-match-text=\"$t('暂无数据')\" :loading-text=\"$t('加载中')\"\r\n                    @change=\"onProvinceChange\">\r\n                    <el-option v-for=\"item in provinceList\" :key=\"item.id\" value-key=\"stateName\" :label=\"item.label\"\r\n                        :value=\"item.stateName\">\r\n                    </el-option>\r\n                </el-select>\r\n                <el-select v-if=\"isProvince && isCity\" v-model=\"formData.city\" filterable :no-data-text=\"$t('暂无数据')\"\r\n                    :no-match-text=\"$t('暂无数据')\" :loading-text=\"$t('加载中')\" :placeholder=\"$t('请选择')\" @change=\"onCityChange\">\r\n                    <el-option v-for=\"item in cityList\" :key=\"item.id\" value-key=\"cityName\" :label=\"item.label\"\r\n                        :value=\"item.cityName\">\r\n                    </el-option>\r\n                </el-select>\r\n            </div>\r\n            <div class=\"item\">\r\n                <el-input :placeholder=\"$t('邮编')\" maxlength=\"32\" show-word-limit v-model=\"formData.postcode\" clearable>\r\n                </el-input>\r\n            </div>\r\n            <div class=\"item\">\r\n                <el-input type=\"textarea\" :placeholder=\"$t('收件地址')\" v-model=\"formData.address\" resize=\"none\" maxlength=\"255\"\r\n                    show-word-limit :autosize=\"{ minRows: 3, maxRows: 4 }\" clearable>\r\n                </el-input>\r\n            </div>\r\n            <div class=\"item check\">\r\n                <div style=\"flex: 1\">{{ $t(\"设为默认地址\") }}</div>\r\n                <van-switch v-model=\"checked\" size=\"20px\" />\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { NavBar, Switch, Toast, Picker, popup } from \"vant\";\r\nimport {\r\n    dizhi_liebiao_post,\r\n    dizhi_xinzeng_post,\r\n    dizhi_xiugai_post,\r\n} from \"@/API/user\";\r\nimport NationalityList from \"@/components/NationalityList\";\r\nimport { apiListCountry, apiListState, apiListCity } from \"@/API/common\";\r\nimport de from \"@/i18n/de\";\r\nexport default {\r\n    data() {\r\n        return {\r\n            triangleDown: require(\"@/assets/image/me/triangle_down.png\"),\r\n            pageDiaCode: false,\r\n            dialCode: localStorage.getItem(\"dialCode\") || 1,\r\n            checked: true,\r\n            showCountryPicker: false,\r\n            showCityPicker: false,\r\n            showProvincePicker: false,\r\n            formData: {\r\n                contacts: \"\",\r\n                email: \"\",\r\n                phone: \"\",\r\n                country: \"\",\r\n                province: \"\",\r\n                city: \"\",\r\n                postcode: \"\",\r\n                address: \"\",\r\n                countryId: 0,\r\n                provinceId: 0,\r\n                cityId: 0,\r\n            },\r\n            currentId: null,\r\n            cityList: [],\r\n            provinceList: [],\r\n            countryList: [],\r\n            countryId: 0,\r\n            provinceId: 0,\r\n            isProvince: true,\r\n            isCity: true,\r\n            currentCountryId: null,\r\n        };\r\n    },\r\n    components: {\r\n        [NavBar.name]: NavBar,\r\n        [Switch.name]: Switch,\r\n        NationalityList,\r\n        [Picker.name]: Picker,\r\n        [popup.name]: popup,\r\n    },\r\n    created() {\r\n        const { id } = this.$route.query;\r\n        if (id) {\r\n            this.currentId = id;\r\n            this.getAddressInfo();\r\n        }\r\n        this.getCountry();\r\n    },\r\n    methods: {\r\n        // 获取国家\r\n        async getCountry() {\r\n            const result = await apiListCountry();\r\n            this.countryList = result.data;\r\n        },\r\n        // 获取省/州\r\n        async getStateList(id) {\r\n            console.log(`id ::->`, id);\r\n            const res = await apiListState({ countryId: +id });\r\n            this.provinceList = res.data;\r\n            if (this.provinceList.length == 0) {\r\n                this.isProvince = false;\r\n                this.provinceList = [{ stateName: this.$t(\"暂无数据\"), id: \"\" }];\r\n            }\r\n        },\r\n        // 获取市\r\n        async getListCity(id) {\r\n            console.log(`id ::->`, id);\r\n            const res = await apiListCity({ stateId: id });\r\n            this.cityList = res.data;\r\n            if (this.cityList.length == 0) {\r\n                this.isCity = false;\r\n                this.cityList = [{ cityName: this.$t(\"暂无数据\"), id: \"\" }];\r\n            } else {\r\n                this.isCity = true;\r\n            }\r\n        },\r\n        // 城市change\r\n        onCityChange(value) {\r\n            this.cityList.find((item) => {\r\n                if (item.cityName == value) {\r\n                    this.formData.cityId = item.id;\r\n                }\r\n            });\r\n            this.formData.city = value;\r\n        },\r\n        // onCityConfirm(value) {\r\n        //     this.formData.city = value.cityName;\r\n        //     this.showCityPicker = false;\r\n        // },\r\n        onCityCancel() {\r\n            this.showCityPicker = false;\r\n        },\r\n        // 选择国家\r\n        // onCountryConfirm(value) {\r\n        //     this.formData.country = value.countryName;\r\n        //     this.countryId = value.id;\r\n        //     this.isProvince = true;\r\n        //     this.isCity = true;\r\n        //     this.showCountryPicker = false;\r\n        //     this.currentCountryId = value.id;\r\n        //     // 查看有没有省\r\n        //     this.getStateList(value.id);\r\n        // },\r\n        onCountryChange(value) {\r\n            this.countryList.find((item) => {\r\n                if (item.countryName == value) {\r\n                    this.formData.country = value\r\n                    this.formData.countryId = item.id\r\n                    this.currentCountryId = this.countryId = item.id;\r\n                    this.isProvince = true;\r\n                    this.showCountryPicker = false;\r\n                    this.getStateList(item.id);\r\n                }\r\n            })\r\n            this.formData.city = this.formData.province = \"\";\r\n            this.formData.cityId = this.formData.provinceId = 0;\r\n            // this.formData.country = value.countryName;\r\n            // this.countryId = value.id;\r\n            // this.isProvince = true;\r\n            // this.isCity = true;\r\n            // this.showCountryPicker = false;\r\n            // this.currentCountryId = value.id;\r\n            // // 查看有没有省\r\n            // this.getStateList(value.id);\r\n        },\r\n        onCountryCancel() {\r\n            this.showCountryPicker = false;\r\n        },\r\n        // onProvinceConfirm(value) {\r\n        //     this.formData.province = value.stateName;\r\n        //     this.provinceId = value.id;\r\n        //     this.showProvincePicker = false;\r\n        //     this.getListCity(value.id);\r\n        // },\r\n        onProvinceChange(value) {\r\n            this.provinceList.find((item) => {\r\n                if (item.stateName == value) {\r\n                    this.formData.province = value\r\n                    this.formData.provinceId = item.id\r\n                    this.provinceId = item.id;\r\n                    this.showProvincePicker = false;\r\n                    this.getListCity(item.id);\r\n                }\r\n            })\r\n            this.formData.city = ''\r\n        },\r\n        onProvinceCancel() {\r\n            this.showProvincePicker = false;\r\n        },\r\n        clickCountry() {\r\n            document.activeElement.blur();\r\n            this.showCountryPicker = true;\r\n            this.formData.province = \"\";\r\n            this.formData.city = \"\";\r\n        },\r\n        ProvincePicker() {\r\n            document.activeElement.blur();\r\n            this.formData.city = \"\";\r\n            // 选择省\r\n            if (this.formData.country == \"\") {\r\n                Toast(this.$t(\"请输入\") + this.$t(\"国家\"));\r\n            } else {\r\n                this.getStateList(this.countryId);\r\n                this.showProvincePicker = true;\r\n            }\r\n        },\r\n\r\n        CityPicker() {\r\n            document.activeElement.blur();\r\n            if (this.formData.province == this.$t(\"暂无数据\")) {\r\n                this.formData.city = this.$t(\"暂无数据\");\r\n                // this.city\r\n            } else if (this.formData.country && this.formData.province) {\r\n                this.getListCity(this.provinceId);\r\n                this.showCityPicker = true;\r\n            } else {\r\n                Toast(this.$t(\"请输入\") + this.$t(\"省区\"));\r\n            }\r\n        },\r\n        getAddressInfo() {\r\n            Toast.loading({\r\n                duration: 0,\r\n                // message: this.$t(\"请求中\"),\r\n                forbidClick: true,\r\n            });\r\n\r\n            dizhi_liebiao_post({})\r\n                .then((res) => {\r\n                    Toast.clear();\r\n                    const { pageList } = res;\r\n                    const address = pageList.find(\r\n                        (item) => String(item.id) === String(this.currentId)\r\n                    );\r\n                    if (address) {\r\n                        this.checked = Boolean(address.use);\r\n                        this.currentCountryId = address?.countryId\r\n                        if (address.phone.indexOf(\"|\") > -1) {\r\n                            const arr = address.phone.split(\"|\");\r\n                            this.dialCode = arr[0];\r\n                            address.phone = arr[1];\r\n                        }\r\n                        delete address.use;\r\n                        address?.countryId && this.getStateList(address.countryId)\r\n                        address?.provinceId && this.getListCity(address.provinceId)\r\n                        this.formData = {\r\n                            ...address,\r\n                        };\r\n                    }\r\n                })\r\n                .catch((err) => {\r\n                    // Toast.fail(err.msg);\r\n                });\r\n        },\r\n\r\n        onClickLeft() {\r\n            this.$router.go(-1);\r\n        },\r\n        // 禁止input框输入表情\r\n        inputVal(type, e) {\r\n            let reg =\r\n                /([0-9|*|#]\\uFE0F\\u20E3)|([0-9|#]\\u20E3)|([\\u203C-\\u3299]\\uFE0F\\u200D)|([\\u203C-\\u3299]\\uFE0F)|([\\u2122-\\u2B55])|(\\u303D)|([(\\A9)|(\\AE)]\\u3030)|(\\uA9)|(\\uAE)|(\\u3030)|([\\uD83C|\\uD83D|\\uD83E][\\uDC00-\\uDFFF])|([\\uD83C|\\uD83D|\\uD83E][\\uDC00-\\uDFFF][\\u200D|\\uFE0F])/g;\r\n            setTimeout(() => {\r\n                this.formData[type] = e.replace(reg, \"\");\r\n            }, 0);\r\n        },\r\n        getName(params) {\r\n            if (!this.pageDiaCode) {\r\n                this.pageDiaCode = true;\r\n            } else {\r\n                this.dialCode = params[2];\r\n                localStorage.setItem(\"dialCode\", this.dialCode);\r\n            }\r\n        },\r\n        openNational() {\r\n            this.$refs.controlChild.open();\r\n        },\r\n        handleInputChange(e) {\r\n            // 限制input只能输入数字\r\n            if (/^[1-9]\\d*$|^$/.test(e)) {\r\n                this.formData.phone = e\r\n            }\r\n\r\n        },\r\n        submitHandle() {\r\n            if (this.formData.contacts === \"\") {\r\n                Toast(this.$t(\"请输入\") + this.$t(\"名称\"));\r\n                return;\r\n            }\r\n            if (this.formData.email === \"\") {\r\n                Toast(this.$t(\"请输入\") + this.$t(\"邮箱\"));\r\n                return;\r\n            } else {\r\n                const reg =\r\n                    /^([A-Za-z0-9_\\-\\.\\w{3,}])+\\@([A-Za-z0-9_\\-\\.])+\\.([A-Za-z]{2,4})$/;\r\n                if (!reg.test(this.formData.email)) {\r\n                    Toast(this.$t(\"邮箱格式有误\"));\r\n                    return;\r\n                }\r\n            }\r\n            if (this.formData.phone === \"\") {\r\n                Toast(this.$t(\"请输入\") + this.$t(\"手机号\"));\r\n                return;\r\n            } else {\r\n                const reg = /^[0-9]+[0-9]*$/;\r\n                if (!reg.test(this.formData.phone)) {\r\n                    Toast(this.$t(\"手机号格式有误\"));\r\n                    return;\r\n                }\r\n            }\r\n            if (this.formData.country === \"\") {\r\n                Toast(this.$t(\"请输入\") + this.$t(\"国家\"));\r\n                return;\r\n            }\r\n            // if (this.formData.province === \"\") {\r\n            //   Toast(this.$t(\"请输入\") + this.$t(\"省区\"));\r\n            //   return;\r\n            // }\r\n            // if (this.formData.city === \"\") {\r\n            //   Toast(this.$t(\"请输入\") + this.$t(\"市\"));\r\n            //   return;\r\n            // }\r\n            if (this.formData.postcode === \"\") {\r\n                // Toast(this.$t(\"请输入\") + this.$t(\"邮编\"));\r\n                this.$notifyWarn(this.$t(\"请输入\") + this.$t(\"邮编\"))\r\n                return;\r\n            }\r\n            if (this.formData.address === \"\") {\r\n                // Toast(this.$t(\"请输入\") + this.$t(\"收件地址\"));\r\n                this.$notifyWarn(this.$t(\"请输入\") + this.$t(\"收件地址\"))\r\n                return;\r\n            }\r\n            if (this.isProvince && this.formData.province == '') {\r\n                // Toast(this.$t(\"请选择\") + this.$t(\"省区\"));\r\n                this.$notifyWarn(this.$t(\"请选择\") + this.$t(\"省区\"))\r\n                return;\r\n            }\r\n            if (this.isProvince && this.isCity && this.formData.city == '') {\r\n                // Toast(this.$t(\"请选择\") + this.$t(\"市\"));\r\n                this.$notifyWarn(this.$t(\"请选择\") + this.$t(\"市\"))\r\n                return;\r\n            }\r\n            const params = {\r\n                ...this.formData,\r\n                countryId: this.currentCountryId,\r\n                phone: `${this.dialCode}|${this.formData.phone}`,\r\n                use: this.checked ? 1 : 0,\r\n            };\r\n\r\n            params.province == '' && delete params.province\r\n            params.city == '' && delete params.city\r\n            let ajaxFn = dizhi_xinzeng_post;\r\n            if (this.currentId) {\r\n                params.id = this.currentId;\r\n                ajaxFn = dizhi_xiugai_post;\r\n            }\r\n\r\n            Toast.loading({\r\n                duration: 0,\r\n                message: this.$t(\"提交中\"),\r\n                forbidClick: true,\r\n            });\r\n\r\n            ajaxFn(params)\r\n                .then(() => {\r\n                    Toast.success(this.$t(\"保存成功\"));\r\n                    setTimeout(() => {\r\n                        this.$router.go(-1);\r\n                    }, 500);\r\n                })\r\n                .catch((err) => {\r\n                    Toast.clear();\r\n                    // Toast.fail(err.msg);\r\n                });\r\n        },\r\n    },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.AddressDetails {\r\n    width: 100%;\r\n\r\n    /deep/ .van-nav-bar__right {\r\n        .van-nav-bar__text {\r\n            color: val(--main-color) !important;\r\n        }\r\n    }\r\n\r\n    /deep/ .el-input {\r\n        input:focus {\r\n            border-color: var(--main-color) !important;\r\n        }\r\n    }\r\n\r\n    /deep/ .el-textarea {\r\n        textarea:focus {\r\n            border-color: var(--main-color) !important;\r\n        }\r\n    }\r\n\r\n    .nr {\r\n        width: 100%;\r\n        padding: 0 15px;\r\n        box-sizing: border-box;\r\n\r\n        .biaoti {\r\n            margin-top: 20px;\r\n            font-style: normal;\r\n            font-weight: 400;\r\n            font-size: 12px;\r\n            line-height: 16px;\r\n            color: #333333;\r\n        }\r\n\r\n        .shuru {\r\n            width: 100%;\r\n            margin-top: 11px;\r\n        }\r\n\r\n        .tijiao {\r\n            margin-top: 20px;\r\n            width: 100%;\r\n            height: 44px;\r\n            background: var(--main-color);\r\n            border-radius: 4px;\r\n            font-style: normal;\r\n            font-weight: 400;\r\n            font-size: 16px;\r\n            line-height: 44px;\r\n            /* identical to box height, or 100% */\r\n\r\n            text-align: center;\r\n\r\n            color: #ffffff;\r\n        }\r\n\r\n        .moren {\r\n            font-style: normal;\r\n            font-weight: 400;\r\n            font-size: 14px;\r\n            line-height: 16px;\r\n            color: #333333;\r\n            margin-top: 22px;\r\n            display: flex;\r\n            width: 100%;\r\n            justify-content: center;\r\n            align-items: center;\r\n        }\r\n    }\r\n}\r\n\r\n.form-content {\r\n    box-sizing: border-box;\r\n    padding: 0 15px;\r\n    padding-bottom: 50px;\r\n\r\n    * {\r\n        box-sizing: border-box;\r\n    }\r\n\r\n    >.item {\r\n        margin-top: 11px;\r\n\r\n        /deep/ .el-input-group--prepend {\r\n            .el-input-group__prepend {\r\n                background-color: transparent !important;\r\n                color: #000 !important;\r\n                border-right: none !important;\r\n                padding: 0 15px !important;\r\n\r\n                .icon {\r\n                    width: 10px;\r\n                    height: auto;\r\n                    position: relative;\r\n                    top: -1px;\r\n                    margin-left: 5px;\r\n                }\r\n            }\r\n\r\n            .el-input__inner {\r\n                border-left-color: #fff;\r\n            }\r\n        }\r\n\r\n        &.check {\r\n            font-style: normal;\r\n            font-weight: 400;\r\n            font-size: 14px;\r\n            line-height: 16px;\r\n            color: #333333;\r\n            display: flex;\r\n            width: 100%;\r\n            justify-content: center;\r\n            align-items: center;\r\n            border: 1px solid #dcdfe6;\r\n            padding: 14px 15px;\r\n            border-radius: 4px;\r\n        }\r\n    }\r\n\r\n    .address_item {\r\n        display: flex;\r\n        margin-top: 11px;\r\n        gap: 10px;\r\n    }\r\n}\r\n\r\n.van-switch--on {\r\n    background-color: var(--main-color) !important;\r\n}\r\n\r\n/deep/ .el-input>.el-input__inner {\r\n    padding-right: 10px !important;\r\n    white-space: nowrap;\r\n    text-overflow: ellipsis;\r\n    overflow: hidden;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}