{"ast":null,"code":"import \"vant/es/icon/style\";\nimport _Icon from \"vant/es/icon\";\nimport \"core-js/modules/es.array.push.js\";\nimport { mapGetters } from \"vuex\";\nexport default {\n  name: \"CustomerService\",\n  data() {\n    return {\n      isFirstRequest: true,\n      token: \"\",\n      serviceUrl: \"\",\n      pageHeight: \"\",\n      lang: \"\",\n      sellerId: \"\",\n      storeName: \"\",\n      isApp: window.plus ? true : false,\n      path: \"\",\n      localIsList: false,\n      isShowIcon: false\n    };\n  },\n  components: {\n    [_Icon.name]: _Icon\n  },\n  computed: {\n    ...mapGetters({\n      userInfo: \"userInfo\"\n    })\n  },\n  mounted() {\n    // this.$refs.header.$refs.navBar.offsetHeight - 44;\n    this.init();\n    // this.localIsList = this.$route.query?.path == 'contacts'\n    // 监听 message 事件\n    window.addEventListener('message', e => {\n      e.data == 'back' && this.$router.push('/');\n      // this.localIsList = this.isShowIcon = e.data == '/h5/message/yellow'\n    });\n  },\n  methods: {\n    onClickLeft() {\n      // 返回\n      this.$router.push('/');\n    },\n    onClickRight() {\n      const base_url = process.env.VUE_APP_IS_APP ? this.$store.state.multiItem[process.env.VUE_APP_ITEM_NAME].app_url : location.origin;\n      this.$refs.frame.contentWindow.postMessage('toContacts', base_url);\n      // this.$refs.frame.contentWindow.postMessage('toContacts', 'https://thsjbvh.site');\n\n      // this.$refs.frame.contentWindow.postMessage('toContacts', 'http://localhost:3000');\n    },\n    init() {\n      this.token = localStorage.getItem(\"token\");\n      this.lang = localStorage.getItem(\"lang\");\n      // this.lang = this.lang?.replace('\"', \"\")?.replace('\"', \"\");\n      this.pageHeight = document.documentElement.clientHeight - 44;\n      this.sellerId = this.$route.query?.path ? '' : localStorage.getItem(\"sellerId\");\n      this.storeName = this.$route.query?.path ? '' : localStorage.getItem(\"storeName\");\n      // this.lang = this.lang == \"cn\" ? \"cn\" : this.lang == \"en\" ? \"en\" : \"tw\";\n      const shopName = this.$route.query?.path ? this.$t('消息') : sessionStorage.getItem('shopName');\n      const goodsId = this.$route.query?.goodsId;\n      const base_url = process.env.VUE_APP_IS_APP ? this.$store.state.multiItem[process.env.VUE_APP_ITEM_NAME].app_url : location.origin;\n      const qs = this.sellerId ? `?partyid=${this.sellerId}&name=${this.storeName}&token=${this.token}&lang=${this.lang}&height=${this.pageHeight}px` : `?token=${this.token}&lang=${this.lang}&height=100%`;\n      this.serviceUrl = `${base_url}/chat/#/h5/${this.$route.query?.path || \"message\"}/yellow${qs}&loginType=user&nohead=true&isH5=true&selfimg=${this.userInfo?.avatar || 1}${shopName && '&shopName=' + shopName}${goodsId && goodsId != 'undefined' ? '&productId=' + goodsId : ''}`;\n    }\n  }\n};","map":{"version":3,"names":["mapGetters","name","data","isFirstRequest","token","serviceUrl","pageHeight","lang","sellerId","storeName","isApp","window","plus","path","localIsList","isShowIcon","components","_Icon","computed","userInfo","mounted","init","addEventListener","e","$router","push","methods","onClickLeft","onClickRight","base_url","process","env","VUE_APP_IS_APP","$store","state","multiItem","VUE_APP_ITEM_NAME","app_url","location","origin","$refs","frame","contentWindow","postMessage","localStorage","getItem","document","documentElement","clientHeight","$route","query","shopName","$t","sessionStorage","goodsId","qs","avatar"],"sources":["src/page/customerService/index.vue"],"sourcesContent":["<template>\r\n    <div class=\"service-box\" :style=\"isApp ? { height: '93%' } : null\">\r\n        <!-- <van-nav-bar safe-area-inset-top :title=\"$t('在线客服')\" left-arrow @click-left=\"onClickLeft\" fixed @click-right=\"onClickRight\"\r\n            ref=\"header\">\r\n            <template #right v-if=\"isShowIcon\">\r\n                <van-icon  name=\"chat-o\" size=\"20\" />\r\n            </template>\r\n            <template #right v-else>\r\n            </template>\r\n        </van-nav-bar> -->\r\n        <!-- <div style=\"width: 100%; height: 46px\"></div> -->\r\n        <!--      <div class=\"h-10 bg-grey w-full\"></div> -->\r\n        <div class=\"back\" @click=\"$router.go(-1)\">\r\n            <!-- <img src=\"@/assets/image/back.png\" alt=\"\"> -->\r\n        </div>\r\n        <iframe ref=\"frame\" :src=\"serviceUrl\" frameborder=\"0\" width=\"100%\" height=\"100%\"\r\n            :class=\"[this.localIsList && 'local_list']\"></iframe>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { Icon } from 'vant';\r\nimport { mapGetters } from \"vuex\";\r\nexport default {\r\n    name: \"CustomerService\",\r\n    data() {\r\n        return {\r\n            isFirstRequest: true,\r\n            token: \"\",\r\n            serviceUrl: \"\",\r\n            pageHeight: \"\",\r\n            lang: \"\",\r\n            sellerId: \"\",\r\n            storeName: \"\",\r\n            isApp: window.plus ? true : false,\r\n            path: \"\",\r\n            localIsList: false,\r\n            isShowIcon: false\r\n        };\r\n    },\r\n    components: {\r\n        [Icon.name]: Icon,\r\n    },\r\n    computed: {\r\n        ...mapGetters({\r\n            userInfo: \"userInfo\",\r\n        }),\r\n    },\r\n    mounted() {\r\n        // this.$refs.header.$refs.navBar.offsetHeight - 44;\r\n        this.init()\r\n        // this.localIsList = this.$route.query?.path == 'contacts'\r\n        // 监听 message 事件\r\n        window.addEventListener('message', (e) => {\r\n            e.data == 'back' && this.$router.push('/');\r\n            // this.localIsList = this.isShowIcon = e.data == '/h5/message/yellow'\r\n        });\r\n    },\r\n    methods: {\r\n        onClickLeft() {\r\n            // 返回\r\n            this.$router.push('/');\r\n        },\r\n        onClickRight() {\r\n            const base_url = process.env.VUE_APP_IS_APP ? this.$store.state.multiItem[process.env.VUE_APP_ITEM_NAME].app_url : location.origin\r\n            this.$refs.frame.contentWindow.postMessage('toContacts', base_url);\r\n            // this.$refs.frame.contentWindow.postMessage('toContacts', 'https://thsjbvh.site');\r\n\r\n            // this.$refs.frame.contentWindow.postMessage('toContacts', 'http://localhost:3000');\r\n        },\r\n        init() {\r\n            this.token = localStorage.getItem(\"token\");\r\n            this.lang = localStorage.getItem(\"lang\");\r\n            // this.lang = this.lang?.replace('\"', \"\")?.replace('\"', \"\");\r\n            this.pageHeight = document.documentElement.clientHeight - 44\r\n            this.sellerId = this.$route.query?.path ? '' : localStorage.getItem(\"sellerId\");\r\n            this.storeName = this.$route.query?.path ? '' : localStorage.getItem(\"storeName\");\r\n            // this.lang = this.lang == \"cn\" ? \"cn\" : this.lang == \"en\" ? \"en\" : \"tw\";\r\n            const shopName = this.$route.query?.path ? this.$t('消息') : sessionStorage.getItem('shopName')\r\n            const goodsId = this.$route.query?.goodsId\r\n            const base_url = process.env.VUE_APP_IS_APP ? this.$store.state.multiItem[process.env.VUE_APP_ITEM_NAME].app_url : location.origin\r\n            const qs = this.sellerId\r\n                ? `?partyid=${this.sellerId}&name=${this.storeName}&token=${this.token}&lang=${this.lang}&height=${this.pageHeight}px`\r\n                : `?token=${this.token}&lang=${this.lang}&height=100%`;\r\n\r\n            this.serviceUrl = `${base_url}/chat/#/h5/${this.$route.query?.path || \"message\"\r\n                }/yellow${qs}&loginType=user&nohead=true&isH5=true&selfimg=${this.userInfo?.avatar || 1}${shopName && '&shopName=' + shopName}${(goodsId && goodsId != 'undefined') ? '&productId=' + goodsId : ''}`;\r\n        }\r\n    },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n// iframe {\r\n//     transform: translateY(44px);\r\n// }\r\n// .local_list {\r\n//     transform: translateY(0) !important;\r\n// }\r\n.back {\r\n    width: 44px;\r\n    height: 44px;\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    background: transparent;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n\r\n}\r\n\r\n.service-box {\r\n    width: 100%;\r\n    height: 100%;\r\n    overflow: hidden;\r\n}\r\n\r\n.time {\r\n    padding-top: 0;\r\n    padding-bottom: 10px;\r\n    padding-left: 54px;\r\n\r\n    &.justify-end {\r\n        padding-right: 54px;\r\n    }\r\n}\r\n\r\n.content {\r\n    overflow-y: scroll;\r\n    height: calc(100vh - 110px);\r\n    position: fixed;\r\n    width: 100%;\r\n}\r\n\r\n.break-word {\r\n    word-break: break-word;\r\n}\r\n\r\n// .max-w-230 {\r\n//   //max-width: 230px;\r\n// }\r\n.responser {\r\n    position: relative;\r\n    //&::after {\r\n    //    content: '';\r\n    //    width:0;\r\n    //    height:0;\r\n    //    border-top:10px solid transparent;\r\n    //    border-bottom:10px solid transparent;\r\n    //    border-right:20px solid #f3f3f3;\r\n    //    position: absolute;\r\n    //    left: -20px;\r\n    //    top: 20px;\r\n    //}\r\n}\r\n\r\n.fasong {\r\n    width: 74px;\r\n    height: 34px;\r\n    font-style: normal;\r\n    font-weight: 400;\r\n    font-size: 14px;\r\n    line-height: 34px;\r\n    text-align: center;\r\n    color: #ffffff;\r\n    // background: var(--main-color);\r\n    background: var(--main-color);\r\n    border-radius: 45px;\r\n}\r\n\r\n.etyaak0 {\r\n    position: absolute;\r\n    left: 0;\r\n    bottom: 784px;\r\n}\r\n</style>\r\n"],"mappings":";;;AAsBA,SAAAA,UAAA;AACA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,cAAA;MACAC,KAAA;MACAC,UAAA;MACAC,UAAA;MACAC,IAAA;MACAC,QAAA;MACAC,SAAA;MACAC,KAAA,EAAAC,MAAA,CAAAC,IAAA;MACAC,IAAA;MACAC,WAAA;MACAC,UAAA;IACA;EACA;EACAC,UAAA;IACA,CAAAC,KAAA,CAAAhB,IAAA,GAAAgB;EACA;EACAC,QAAA;IACA,GAAAlB,UAAA;MACAmB,QAAA;IACA;EACA;EACAC,QAAA;IACA;IACA,KAAAC,IAAA;IACA;IACA;IACAV,MAAA,CAAAW,gBAAA,YAAAC,CAAA;MACAA,CAAA,CAAArB,IAAA,mBAAAsB,OAAA,CAAAC,IAAA;MACA;IACA;EACA;EACAC,OAAA;IACAC,YAAA;MACA;MACA,KAAAH,OAAA,CAAAC,IAAA;IACA;IACAG,aAAA;MACA,MAAAC,QAAA,GAAAC,OAAA,CAAAC,GAAA,CAAAC,cAAA,QAAAC,MAAA,CAAAC,KAAA,CAAAC,SAAA,CAAAL,OAAA,CAAAC,GAAA,CAAAK,iBAAA,EAAAC,OAAA,GAAAC,QAAA,CAAAC,MAAA;MACA,KAAAC,KAAA,CAAAC,KAAA,CAAAC,aAAA,CAAAC,WAAA,eAAAd,QAAA;MACA;;MAEA;IACA;IACAR,KAAA;MACA,KAAAjB,KAAA,GAAAwC,YAAA,CAAAC,OAAA;MACA,KAAAtC,IAAA,GAAAqC,YAAA,CAAAC,OAAA;MACA;MACA,KAAAvC,UAAA,GAAAwC,QAAA,CAAAC,eAAA,CAAAC,YAAA;MACA,KAAAxC,QAAA,QAAAyC,MAAA,CAAAC,KAAA,EAAArC,IAAA,QAAA+B,YAAA,CAAAC,OAAA;MACA,KAAApC,SAAA,QAAAwC,MAAA,CAAAC,KAAA,EAAArC,IAAA,QAAA+B,YAAA,CAAAC,OAAA;MACA;MACA,MAAAM,QAAA,QAAAF,MAAA,CAAAC,KAAA,EAAArC,IAAA,QAAAuC,EAAA,SAAAC,cAAA,CAAAR,OAAA;MACA,MAAAS,OAAA,QAAAL,MAAA,CAAAC,KAAA,EAAAI,OAAA;MACA,MAAAzB,QAAA,GAAAC,OAAA,CAAAC,GAAA,CAAAC,cAAA,QAAAC,MAAA,CAAAC,KAAA,CAAAC,SAAA,CAAAL,OAAA,CAAAC,GAAA,CAAAK,iBAAA,EAAAC,OAAA,GAAAC,QAAA,CAAAC,MAAA;MACA,MAAAgB,EAAA,QAAA/C,QAAA,GACA,iBAAAA,QAAA,cAAAC,SAAA,eAAAL,KAAA,cAAAG,IAAA,gBAAAD,UAAA,OACA,eAAAF,KAAA,cAAAG,IAAA;MAEA,KAAAF,UAAA,MAAAwB,QAAA,mBAAAoB,MAAA,CAAAC,KAAA,EAAArC,IAAA,uBACA0C,EAAA,sDAAApC,QAAA,EAAAqC,MAAA,QAAAL,QAAA,mBAAAA,QAAA,GAAAG,OAAA,IAAAA,OAAA,kCAAAA,OAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}